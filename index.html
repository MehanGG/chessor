<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>ESPERIA | Developer Documentation</title>
        <link rel="icon" type="image/png" href="images/growtopiatv.png">
        <!-- Discord Embed Meta Tags -->
        <meta property="og:title" content="ESPERIA | Developer Documentation">
        <meta property="og:description" content="The official Lua API documentation for the ESPERIA private server. Find all callbacks, functions, and methods.">
        <meta property="og:type" content="website">
        <meta property="og:url" content="https://your-website-url.com/dev.html">
        <!-- TODO: Replace with your actual URL -->
        <meta property="og:image" content="https://your-website-url.com/images/esperia-embed-image.png">
        <!-- TODO: Replace with a link to an embed image -->
        <meta name="theme-color" content="#9333ea">
        <!-- This is the purple color from your CSS -->
        <script src="https://cdn.tailwindcss.com"></script>
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Orbitron:wght@900&family=Fira+Code:wght@400;600&display=swap" rel="stylesheet">
        <!-- For icons -->
        <script src="https://unpkg.com/lucide@latest"></script>
        <style>
            :root {
                --c-bg: #0D0D1A;
                --c-bg-light: #1A1A2E;
                --c-border: #2A2A4E;
                --c-purple: #9333ea;
                --c-accent: #22d3ee;
                /* Changed accent to cyan/diamond */
                --c-accent-hover: #67e8f9;
                --c-text-primary: #e0e0e0;
                --c-text-secondary: #a0a0b0;
                --c-code-bg: #0d1117;
                --c-yellow: #f59e0b;
                /* Gold/Yellow from main site */
                --c-blue: #3b82f6;
                --c-pink: #ec4899;
            }

            html {
                scroll-behavior: smooth;
            }

            body {
                background-color: var(--c-bg);
                font-family: 'Inter', sans-serif;
                color: var(--c-text-primary);
                overflow-x: hidden;
            }

            .font-title {
                font-family: 'Orbitron', sans-serif;
            }

            .nav-link.active {
                color: var(--c-accent);
                /* Updated from var(--c-diamond) */
                text-shadow: 0 0 8px var(--c-accent);
                /* Updated from var(--c-diamond) */
            }

            /* Custom Scrollbar */
            ::-webkit-scrollbar {
                width: 8px;
            }

            ::-webkit-scrollbar-track {
                background: var(--c-bg);
            }

            ::-webkit-scrollbar-thumb {
                background-color: var(--c-border);
                border-radius: 4px;
            }

            ::-webkit-scrollbar-thumb:hover {
                background-color: var(--c-accent);
            }

            /* Sidebar scrolling fix */
            #doc-nav, #right-sidebar {
                max-height: calc(100vh - 12rem);
                overflow-y: auto;
                padding-right: 4px;
                /* Space for scrollbar */
            }

            .sidebar-link {
                transition: all 0.2s ease-in-out;
                border-left: 3px solid transparent;
            }

            .sidebar-link:hover {
                background-color: var(--c-bg-light);
                border-left-color: var(--c-accent-hover);
                color: white;
                text-shadow: 0 0 8px var(--c-accent-hover);
            }

            .sidebar-link.active {
                background-color: var(--c-bg-light);
                border-left-color: var(--c-accent);
                color: var(--c-accent);
                font-weight: 600;
                text-shadow: 0 0 8px var(--c-accent);
            }

            .doc-section h2 {
                font-size: 2rem;
                border-image: linear-gradient(to right, var(--c-purple), var(--c-accent)) 1;
                border-bottom: 2px solid;
                padding-bottom: 0.5rem;
                margin-bottom: 1.5rem;
                scroll-margin-top: 80px;
            }

            .function-entry {
                background-color: var(--c-bg-light);
                border: 1px solid var(--c-border);
                border-radius: 0.5rem;
                margin-bottom: 2rem;
                transition: all 0.3s ease;
            }

            .function-entry:hover {
                border-color: var(--c-purple);
                transform: translateY(-2px);
                box-shadow: 0 0 25px rgba(147, 51, 234, 0.1);
            }

            .function-header {
                padding: 1rem 1.5rem;
            }

            .function-body {
                border-top: 1px solid var(--c-border);
                padding: 1.5rem;
            }

            .function-signature {
                background-color: var(--c-code-bg);
                padding: 1rem;
                border-radius: 0.5rem;
                position: relative;
            }

            .function-signature code {
                white-space: pre-wrap;
                word-break: break-all;
            }

            .function-signature .copy-btn {
                position: absolute;
                top: 0.5rem;
                right: 0.5rem;
                background-color: var(--c-border);
                color: var(--c-text-secondary);
                border: none;
                border-radius: 0.375rem;
                padding: 0.25rem 0.5rem;
                cursor: pointer;
                transition: all 0.2s;
            }

            .function-signature .copy-btn:hover {
                background-color: var(--c-accent);
                color: var(--c-bg);
            }

            .param-name {
                color: var(--c-blue);
            }

            .type-name {
                color: var(--c-yellow);
            }

            .function-name {
                color: var(--c-accent);
                font-weight: 600;
            }

            #doc-search {
                background-color: #e0e0e0;
                color: #111111 !important;
                border-color: var(--c-border);
            }

            #doc-search::placeholder {
                color: #555555;
            }

            .highlight {
                background-color: var(--c-yellow);
                color: var(--c-bg);
                border-radius: 2px;
                padding: 0 2px;
            }

            /* Tool Specific Styles */
            .tool-textarea {
                background-color: var(--c-code-bg);
                color: var(--c-text-primary);
                border: 1px solid var(--c-border);
                font-family: 'Fira Code', monospace;
                font-size: 0.875rem;
            }

            .tool-textarea:focus {
                outline: none;
                border-color: var(--c-accent);
                ring: 2px solid var(--c-accent);
            }

            .tool-input {
                background-color: var(--c-code-bg);
                color: var(--c-text-primary);
                border: 1px solid var(--c-border);
                padding: 0.5rem;
                border-radius: 0.375rem;
                font-size: 0.875rem;
            }

            .tool-input:focus {
                outline: none;
                border-color: var(--c-accent);
                ring: 2px solid var(--c-accent);
            }

            /* Updated visibility for copy buttons */
            .visible-action-btn {
                background-color: #2A2A4E;
                /* Lighter than bg */
                border: 1px solid #4B5563;
                color: var(--c-text-secondary);
            }

            .visible-action-btn:hover {
                background-color: var(--c-accent);
                color: var(--c-bg);
                border-color: var(--c-accent);
            }
        </style>
    </head>
    <body class="antialiased">
        <!-- Header -->
        <header class="bg-c-bg/80 backdrop-blur-sm border-b border-c-border sticky top-0 z-50">
            <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
                <a href="index.html" class="text-3xl font-title text-white">ESPERIA</a>
                <div class="hidden md:flex absolute top-1/2 left-1/2 -translate-y-1/2 -translate-x-1/2 items-center space-x-6 text-c-text-secondary font-semibold text-sm">
                    <a href="index.html" class="nav-link hover:text-c-accent transition duration-300">Home</a>
                    <a href="servers.html" class="nav-link hover:text-c-accent transition duration-300">Servers</a>
                    <a href="market.html" class="nav-link hover:text-c-accent transition duration-300">Items/Scripts</a>
                    <a href="dev.html" class="nav-link hover:text-c-accent transition duration-300 active">Dev Docs</a>
                </div>
                <div class="hidden md:flex items-center space-x-4">
                    <a href="https://discord.gg/9gepNQPqJN" target="_blank" class="text-sm py-2 px-6 bg-blue-600 hover:bg-blue-500 text-white font-bold rounded transition">Main Discord</a>
                </div>
            </nav>
        </header>
        <!-- Main Content -->
        <div class="container mx-auto px-6 py-8">
            <div class="flex flex-col md:flex-row gap-8">
                <!-- Left Sidebar -->
                <aside id="left-sidebar" class="w-full md:w-1/5 lg:w-1/5">
                    <div class="sticky top-24">
                        <input type="text" id="doc-search" class="w-full rounded-md px-3 py-2 mb-4 focus:outline-none focus:ring-2 focus:ring-c-accent" placeholder="Search functions...">
                        <nav id="doc-nav" class="space-y-1">
                            <div class="mb-4">
                                <span class="text-xs font-semibold text-c-text-secondary uppercase tracking-wider ml-2">Tools</span>
                                <a href="#xml-encoder" class="sidebar-link text-sm p-2 rounded-md block mt-1">
                                    <i data-lucide="code" class="inline w-4 h-4 mr-1"></i>
                                    XML Encoder
                                </a>
                                <a href="#ai-helper" class="sidebar-link text-sm p-2 rounded-md block mt-1">
                                    <i data-lucide="sparkles" class="inline w-4 h-4 mr-1"></i>
                                    AI Code Helper
                                </a>
                                <!-- NEW: BGRA Color Picker Link -->
                                <a href="#bgra-picker" class="sidebar-link text-sm p-2 rounded-md block mt-1">
                                    <i data-lucide="palette" class="inline w-4 h-4 mr-1"></i>
                                    BGRA Color Picker
                                </a>
                            </div>
                            <span class="text-xs font-semibold text-c-text-secondary uppercase tracking-wider ml-2">Documentation</span>
                            <a href="#changelog" class="sidebar-link text-sm p-2 rounded-md block mt-1">API Changelog</a>
                            <a href="#callbacks" class="sidebar-link text-sm p-2 rounded-md block">Callbacks</a>
                            <a href="#commands" class="sidebar-link text-sm p-2 rounded-md block">Commands</a>
                            <a href="#dialogs" class="sidebar-link text-sm p-2 rounded-md block">Dialog Syntax</a>
                            <a href="#player" class="sidebar-link text-sm p-2 rounded-md block">Player</a>
                            <a href="#world" class="sidebar-link text-sm p-2 rounded-md block">World</a>
                            <a href="#tile" class="sidebar-link text-sm p-2 rounded-md block">Tile</a>
                            <a href="#item" class="sidebar-link text-sm p-2 rounded-md block">Item</a>
                            <a href="#inventory_item" class="sidebar-link text-sm p-2 rounded-md block">Inventory Item</a>
                            <a href="#drop" class="sidebar-link text-sm p-2 rounded-md block">Drop</a>
                            <a href="#server" class="sidebar-link text-sm p-2 rounded-md block">Server & Global</a>
                            <a href="#os" class="sidebar-link text-sm p-2 rounded-md block">OS Library</a>
                            <a href="#libraries" class="sidebar-link text-sm p-2 rounded-md block">Libraries</a>
                            <a href="#misc" class="sidebar-link text-sm p-2 rounded-md block">Miscellaneous</a>
                        </nav>
                    </div>
                </aside>
                <!-- Main Documentation -->
                <main class="w-full md:w-3/5 lg:w-3/5 doc-content">
                    <div class="bg-c-bg-light border border-c-border rounded-lg p-4 mb-8 text-center text-sm text-c-text-secondary">This documentation page is for a private server project and is not affiliated with the official GrowSoft game or its developers. It is provided for informational purposes only.
                </div>
                    <!-- XML Encoder Tool Section -->
                    <div id="xml-encoder" class="doc-section mb-12">
                        <h2 class="font-title">XML Item Encoder</h2>
                        <div class="bg-c-bg-light border border-c-border rounded-lg p-6">
                            <div class="mb-4">
                                <p class="text-c-text-secondary text-sm">
                                    Paste your readable <code class="bg-c-code-bg px-1 rounded">items.xml</code>
                                    content on the left. 
                                The tool will generate the secure, encoded version on the right, including the license block and header.
                            
                                </p>
                                <p class="text-yellow-500/80 text-xs mt-2 bg-yellow-900/10 border border-yellow-700/30 p-2 rounded inline-block">
                                    <i data-lucide="alert-triangle" class="inline w-3 h-3 mr-1"></i>
                                    <strong>Recommendation:</strong>
                                    Always keep a save file of your non-encoded (readable) version. The encoding process is not reversible.
                            
                                </p>
                            </div>
                            <!-- Configuration Inputs -->
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                                <div class="flex flex-col">
                                    <label for="xml-server-name" class="text-xs font-semibold text-c-text-secondary uppercase mb-1">Server Name</label>
                                    <!-- UPDATED: Removed default value -->
                                    <input type="text" id="xml-server-name" class="tool-input w-full" placeholder="Enter your server name">
                                </div>
                                <div class="flex flex-col">
                                    <label for="xml-owner-name" class="text-xs font-semibold text-c-text-secondary uppercase mb-1">Owner Name</label>
                                    <!-- UPDATED: Removed default value -->
                                    <input type="text" id="xml-owner-name" class="tool-input w-full" placeholder="Enter owner name">
                                </div>
                            </div>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <!-- Input -->
                                <div class="flex flex-col">
                                    <label for="xml-input" class="text-sm font-semibold text-c-text-primary mb-2">Readable XML Input</label>
                                    <textarea id="xml-input" class="tool-textarea w-full h-96 p-4 rounded-md resize-y" placeholder="<items>&#10;  <ItemRenderer item='...'>&#10;    ...&#10;  </ItemRenderer>&#10;</items>"></textarea>
                                </div>
                                <!-- Output -->
                                <div class="flex flex-col relative">
                                    <label for="xml-output" class="text-sm font-semibold text-c-text-primary mb-2">Encoded Output</label>
                                    <textarea id="xml-output" class="tool-textarea w-full h-96 p-4 rounded-md resize-y" readonly placeholder="Output will appear here..."></textarea>
                                    <!-- UPDATED: Added visible-action-btn class for better visibility -->
                                    <button id="copy-xml-btn" class="absolute top-9 right-2 visible-action-btn p-2 rounded transition-colors" title="Copy Output">
                                        <i data-lucide="copy" class="w-4 h-4"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="mt-4 flex justify-between items-center">
                                <span class="text-xs text-c-text-secondary italic">XML Encoder made on ESPERIA.LIVE/DEV</span>
                                <button id="encode-btn" class="bg-c-purple hover:bg-fuchsia-600 text-white font-bold py-2 px-6 rounded transition-all shadow-lg hover:shadow-purple-500/20 flex items-center gap-2">
                                    <i data-lucide="cpu" class="w-4 h-4"></i>
                                    Encode XML
                            
                                </button>
                            </div>
                        </div>
                    </div>
                    <!-- AI Code Helper Tool Section -->
                    <div id="ai-helper" class="doc-section mb-16">
                        <h2 class="font-title flex items-center gap-2">
                            <i data-lucide="sparkles" class="text-c-accent"></i>
                            AI Code Helper
                    
                        </h2>
                        <div class="bg-c-bg-light border border-c-border rounded-lg p-6">
                            <div class="bg-blue-900/30 border border-blue-500/30 rounded p-3 mb-4 text-xs text-blue-200">
                                <strong>Note:</strong>
                                This tool uses the Google Gemini API. You must provide a valid API Key for it to function. The key is used locally in your browser and is not stored. 
                            <a href="https://aistudio.google.com/app/apikey" target="_blank" class="underline text-blue-100 hover:text-white">Get an API Key here</a>
                                .
                        
                            </div>
                            <div class="mb-4">
                                <label for="ai-api-key" class="text-xs font-semibold text-c-text-secondary uppercase mb-1">Gemini API Key</label>
                                <div class="relative">
                                    <input type="password" id="ai-api-key" class="tool-input w-full pr-10" placeholder="Paste your API Key here (starts with AIza...)">
                                    <button id="toggle-key-visibility" class="absolute right-2 top-1/2 -translate-y-1/2 text-c-text-secondary hover:text-c-text-primary">
                                        <i data-lucide="eye" class="w-4 h-4"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="flex flex-col mb-4">
                                <label for="ai-prompt" class="text-sm font-semibold text-c-text-primary mb-2">What do you want to build?</label>
                                <textarea id="ai-prompt" class="tool-textarea w-full h-32 p-4 rounded-md resize-y" placeholder="Example: Create a command /givegems that gives 100 gems to the player and shows a message."></textarea>
                            </div>
                            <div class="flex justify-between items-center mb-4">
                                <span id="ai-status" class="text-sm text-c-text-secondary italic"></span>
                                <button id="ai-generate-btn" class="bg-c-accent hover:bg-cyan-600 text-white font-bold py-2 px-6 rounded transition-all shadow-lg hover:shadow-cyan-500/20 flex items-center gap-2">
                                    <i data-lucide="bot" class="w-4 h-4"></i>
                                    Generate Code
                            
                                </button>
                            </div>
                            <div class="flex flex-col relative">
                                <label for="ai-output" class="text-sm font-semibold text-c-text-primary mb-2">Generated Lua Script</label>
                                <textarea id="ai-output" class="tool-textarea w-full h-64 p-4 rounded-md resize-y" readonly placeholder="AI generated code will appear here..."></textarea>
                                <!-- UPDATED: Added visible-action-btn class for better visibility -->
                                <button id="copy-ai-btn" class="absolute top-9 right-2 visible-action-btn p-2 rounded transition-colors" title="Copy Code">
                                    <i data-lucide="copy" class="w-4 h-4"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                    <!-- NEW: BGRA Color Picker Tool Section -->
                    <div id="bgra-picker" class="doc-section mb-16">
                        <h2 class="font-title flex items-center gap-2">
                            <i data-lucide="palette" class="text-c-accent"></i>
                            BGRA Color Picker
                    
                        </h2>
                        <div class="bg-c-bg-light border border-c-border rounded-lg p-6">
                            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                                <!-- Sliders -->
                                <div class="space-y-6">
                                    <!-- Red -->
                                    <div>
                                        <div class="flex justify-between mb-2">
                                            <label class="text-sm font-semibold text-red-400">Red</label>
                                            <input type="number" id="val-r" class="bg-transparent text-right text-sm text-c-text-primary w-12 focus:outline-none focus:ring-1 focus:ring-c-border rounded" value="255" min="0" max="255">
                                        </div>
                                        <input type="range" id="range-r" min="0" max="255" value="255" class="w-full h-2 bg-c-bg rounded-lg appearance-none cursor-pointer accent-red-500">
                                    </div>
                                    <!-- Green -->
                                    <div>
                                        <div class="flex justify-between mb-2">
                                            <label class="text-sm font-semibold text-green-400">Green</label>
                                            <input type="number" id="val-g" class="bg-transparent text-right text-sm text-c-text-primary w-12 focus:outline-none focus:ring-1 focus:ring-c-border rounded" value="255" min="0" max="255">
                                        </div>
                                        <input type="range" id="range-g" min="0" max="255" value="255" class="w-full h-2 bg-c-bg rounded-lg appearance-none cursor-pointer accent-green-500">
                                    </div>
                                    <!-- Blue -->
                                    <div>
                                        <div class="flex justify-between mb-2">
                                            <label class="text-sm font-semibold text-blue-400">Blue</label>
                                            <input type="number" id="val-b" class="bg-transparent text-right text-sm text-c-text-primary w-12 focus:outline-none focus:ring-1 focus:ring-c-border rounded" value="255" min="0" max="255">
                                        </div>
                                        <input type="range" id="range-b" min="0" max="255" value="255" class="w-full h-2 bg-c-bg rounded-lg appearance-none cursor-pointer accent-blue-500">
                                    </div>
                                    <!-- Alpha -->
                                    <div>
                                        <div class="flex justify-between mb-2">
                                            <label class="text-sm font-semibold text-gray-400">Alpha</label>
                                            <input type="number" id="val-a" class="bg-transparent text-right text-sm text-c-text-primary w-12 focus:outline-none focus:ring-1 focus:ring-c-border rounded" value="255" min="0" max="255">
                                        </div>
                                        <input type="range" id="range-a" min="0" max="255" value="255" class="w-full h-2 bg-c-bg rounded-lg appearance-none cursor-pointer accent-gray-500">
                                    </div>
                                </div>
                                <!-- Preview & Output -->
                                <div class="flex flex-col gap-6">
                                    <!-- Preview Box with Checkerboard pattern -->
                                    <div class="flex-1 min-h-[150px] rounded-lg border border-c-border relative overflow-hidden" style="background-image: linear-gradient(45deg, #2A2A4E 25%, transparent 25%), linear-gradient(-45deg, #2A2A4E 25%, transparent 25%), linear-gradient(45deg, transparent 75%, #2A2A4E 75%), linear-gradient(-45deg, transparent 75%, #2A2A4E 75%); background-size: 20px 20px; background-position: 0 0, 0 10px, 10px -10px, -10px 0px;">
                                        <div id="color-preview-box" class="absolute inset-0 transition-colors duration-100" style="background-color: rgba(255, 255, 255, 1);"></div>
                                        <div class="absolute bottom-2 right-2 bg-black/60 px-2 py-1 rounded text-xs text-white font-mono" id="preview-text">rgba(255,255,255,1)</div>
                                    </div>
                                    <!-- Outputs -->
                                    <div class="space-y-4">
                                        <div class="relative">
                                            <label class="text-xs font-semibold text-c-text-secondary uppercase mb-1 block">Growtopia Integer (Signed)</label>
                                            <input type="text" id="out-gt-int" readonly class="tool-input w-full font-mono text-c-accent" value="-1">
                                            <button class="absolute top-6 right-2 visible-action-btn p-1.5 rounded transition-colors copy-btn-tool" data-target="out-gt-int" title="Copy Integer">
                                                <i data-lucide="copy" class="w-4 h-4"></i>
                                            </button>
                                        </div>
                                        <div class="relative">
                                            <label class="text-xs font-semibold text-c-text-secondary uppercase mb-1 block">Hex Code (0xBBGGRRAA)</label>
                                            <input type="text" id="out-hex" readonly class="tool-input w-full font-mono text-yellow-400" value="0xFFFFFFFF">
                                            <button class="absolute top-6 right-2 visible-action-btn p-1.5 rounded transition-colors copy-btn-tool" data-target="out-hex" title="Copy Hex">
                                                <i data-lucide="copy" class="w-4 h-4"></i>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div id="changelog" class="doc-section">
                        <h2 class="font-title">API Changelog</h2>
                        <div class="function-entry">
                            <div class="function-header">
                                <h3 class="text-xl font-bold font-title text-white">February 4, 2026</h3>
                            </div>
                            <div class="function-body">
                                <h4 class="font-semibold text-c-accent mb-2">New Features & Updates:</h4>
                                <ul class="list-disc list-inside space-y-2 text-c-text-secondary">
                                    <li>
                                        <strong>Lua Filesystem & SQL:</strong>
                                        Added <code class="font-code text-c-text-primary bg-c-code-bg px-1 rounded">file</code>
                                        , <code class="font-code text-c-text-primary bg-c-code-bg px-1 rounded">dir</code>
                                        , and <code class="font-code text-c-text-primary bg-c-code-bg px-1 rounded">sqlite</code>
                                        libraries.
                                    </li>
                                    <li>
                                        <strong>Modules:</strong>
                                        Added support for <code class="font-code text-c-text-primary bg-c-code-bg px-1 rounded">require()</code>
                                        .
                                    </li>
                                    <li>
                                        <strong>HTTP Server:</strong>
                                        Added <code class="font-code text-c-text-primary bg-c-code-bg px-1 rounded">onHTTPRequest</code>
                                        callback.
                                    </li>
                                    <li>
                                        <strong>Discord Interaction:</strong>
                                        Added button and form callbacks (<code class="font-code text-c-text-primary bg-c-code-bg px-1 rounded">onDiscordButtonClickCallback</code>
                                        , <code class="font-code text-c-text-primary bg-c-code-bg px-1 rounded">onDiscordFormSubmitCallback</code>
                                        ).
                                    </li>
                                    <li>
                                        <strong>New World/Player Methods:</strong>
                                        Added <code class="font-code text-c-text-primary bg-c-code-bg px-1 rounded">deleteAccount</code>
                                        , <code class="font-code text-c-text-primary bg-c-code-bg px-1 rounded">deleteWorld</code>
                                        , <code class="font-code text-c-text-primary bg-c-code-bg px-1 rounded">world:hasFlag</code>
                                        , <code class="font-code text-c-text-primary bg-c-code-bg px-1 rounded">player:getPing</code>
                                        , etc.
                                    </li>
                                    <li>
                                        <strong>Dungeons & Startopia:</strong>
                                        Added related callbacks and scroll management.
                                    </li>
                                </ul>
                            </div>
                        </div>
                        <div class="function-entry">
                            <div class="function-header">
                                <h3 class="text-xl font-bold font-title text-white">January 7, 2026</h3>
                            </div>
                            <div class="function-body">
                                <h4 class="font-semibold text-c-accent mb-2">New Features & Updates:</h4>
                                <ul class="list-disc list-inside space-y-2 text-c-text-secondary">
                                    <li>
                                        <strong>New World Access Management:</strong>
                                        Added <code class="font-code text-c-text-primary bg-c-code-bg px-1 rounded">world:addAccess</code>
                                        , <code class="font-code text-c-text-primary bg-c-code-bg px-1 rounded">world:removeAccess</code>
                                        , <code class="font-code text-c-text-primary bg-c-code-bg px-1 rounded">world:addTileAccess</code>
                                        , <code class="font-code text-c-text-primary bg-c-code-bg px-1 rounded">world:removeTileAccess</code>
                                        , and <code class="font-code text-c-text-primary bg-c-code-bg px-1 rounded">world:removeAllTileAccess</code>
                                        .
                                    </li>
                                    <li>
                                        <strong>Friend System:</strong>
                                        Added <code class="font-code text-c-text-primary bg-c-code-bg px-1 rounded">player:getFriends</code>
                                        , <code class="font-code text-c-text-primary bg-c-code-bg px-1 rounded">player:addFriend</code>
                                        , and <code class="font-code text-c-text-primary bg-c-code-bg px-1 rounded">player:removeFriend</code>
                                        .
                                    </li>
                                    <li>
                                        <strong>Quests & Points:</strong>
                                        Added <code class="font-code text-c-text-primary bg-c-code-bg px-1 rounded">player:getLifeGoals</code>
                                        , <code class="font-code text-c-text-primary bg-c-code-bg px-1 rounded">player:getBiweeklyQuests</code>
                                        , <code class="font-code text-c-text-primary bg-c-code-bg px-1 rounded">getJimDailyQuest</code>
                                        , and <code class="font-code text-c-text-primary bg-c-code-bg px-1 rounded">player:addGrowpassPoints</code>
                                        .
                                    </li>
                                    <li>
                                        <strong>Game Mechanics:</strong>
                                        Added <code class="font-code text-c-text-primary bg-c-code-bg px-1 rounded">player:adjustBlockHitCount</code>
                                        and <code class="font-code text-c-text-primary bg-c-code-bg px-1 rounded">player:getAdjustedBlockHitCount</code>
                                        .
                                    </li>
                                    <li>
                                        <strong>Callback Updates:</strong>
                                        Updated <code class="font-code text-c-text-primary bg-c-code-bg px-1 rounded">onPlayerSurgeryCallback</code>
                                        (now includes target player) and added callback support to <code class="font-code text-c-text-primary bg-c-code-bg px-1 rounded">player:onDialogRequest</code>
                                        .
                                    </li>
                                </ul>
                            </div>
                        </div>
                        <!-- Previous changelogs omitted for brevity but remain in file -->
                        <div class="function-entry">
                            <div class="function-header">
                                <h3 class="text-xl font-bold font-title text-white">December 30, 2025</h3>
                            </div>
                            <div class="function-body">
                                <h4 class="font-semibold text-c-accent mb-2">New Features & Updates:</h4>
                                <ul class="list-disc list-inside space-y-2 text-c-text-secondary">
                                    <li>
                                        Added new callbacks: <code class="font-code text-c-text-primary bg-c-code-bg px-1 rounded">onPlayerRegisterCallback</code>
                                        and <code class="font-code text-c-text-primary bg-c-code-bg px-1 rounded">onPlayerConvertItemCallback</code>
                                        .
                                    </li>
                                    <li>
                                        Major Economy & World query updates: <code class="font-code text-c-text-primary bg-c-code-bg px-1 rounded">getEcoQuantity</code>
                                        , <code class="font-code text-c-text-primary bg-c-code-bg px-1 rounded">player:getOwnedWorlds</code>
                                        , <code class="font-code text-c-text-primary bg-c-code-bg px-1 rounded">player:getRecentWorlds</code>
                                        , <code class="font-code text-c-text-primary bg-c-code-bg px-1 rounded">player:getAltAccounts</code>
                                        .
                                    </li>
                                    <li>
                                        Expanded Role management: <code class="font-code text-c-text-primary bg-c-code-bg px-1 rounded">getRoles()</code>
                                        , <code class="font-code text-c-text-primary bg-c-code-bg px-1 rounded">getHighestPriorityRole()</code>
                                        , and <code class="font-code text-c-text-primary bg-c-code-bg px-1 rounded">player:getRole()</code>
                                        .
                                    </li>
                                    <li>
                                        Added redeem code system: <code class="font-code text-c-text-primary bg-c-code-bg px-1 rounded">createRedeemCode</code>
                                        and <code class="font-code text-c-text-primary bg-c-code-bg px-1 rounded">world:redeemCode</code>
                                        .
                                    </li>
                                    <li>
                                        Added server broadcast controls: <code class="font-code text-c-text-primary bg-c-code-bg px-1 rounded">player:setBroadcastWorld</code>
                                        and <code class="font-code text-c-text-primary bg-c-code-bg px-1 rounded">setBroadcastWorld</code>
                                        .
                                    </li>
                                    <li>
                                        Added History tracking: <code class="font-code text-c-text-primary bg-c-code-bg px-1 rounded">player:getIPHistory()</code>
                                        and <code class="font-code text-c-text-primary bg-c-code-bg px-1 rounded">player:getRIDHistory()</code>
                                        .
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div id="callbacks" class="doc-section">
                        <h2 class="font-title">Callbacks</h2>
                    </div>
                    <div id="commands" class="doc-section">
                        <h2 class="font-title">Commands</h2>
                    </div>
                    <div id="dialogs" class="doc-section">
                        <h2 class="font-title">Dialog Syntax</h2>
                    </div>
                    <div id="player" class="doc-section">
                        <h2 class="font-title">Player</h2>
                    </div>
                    <div id="world" class="doc-section">
                        <h2 class="font-title">World</h2>
                    </div>
                    <div id="tile" class="doc-section">
                        <h2 class="font-title">Tile</h2>
                    </div>
                    <div id="item" class="doc-section">
                        <h2 class="font-title">Item</h2>
                    </div>
                    <div id="inventory_item" class="doc-section">
                        <h2 class="font-title">Inventory Item</h2>
                    </div>
                    <div id="drop" class="doc-section">
                        <h2 class="font-title">Drop</h2>
                    </div>
                    <div id="server" class="doc-section">
                        <h2 class="font-title">Server & Global</h2>
                    </div>
                    <div id="os" class="doc-section">
                        <h2 class="font-title">OS Library</h2>
                    </div>
                    <div id="libraries" class="doc-section">
                        <h2 class="font-title">Libraries</h2>
                    </div>
                    <div id="misc" class="doc-section">
                        <h2 class="font-title">Miscellaneous</h2>
                    </div>
                </main>
                <!-- Right Sidebar -->
                <aside class="hidden lg:block w-1/5">
                    <div id="right-sidebar" class="sticky top-24">
                        <h3 class="font-semibold text-c-text-secondary text-sm mb-3">On this page</h3>
                        <ul id="on-this-page-nav" class="space-y-2">
                        <!-- Links will be injected here -->
                        </ul>
                    </div>
                </aside>
            </div>
        </div>
        <script>
            document.addEventListener('DOMContentLoaded', () => {
                const documentationData = [// Callbacks
                {
                    section: 'callbacks',
                    signature: 'onPlayerDialogCallback(world, player, data)',
                    description: 'Handles player interactions with dialogs. The `data` table contains `dialog_name` and `buttonClicked`.'
                }, {
                    section: 'callbacks',
                    signature: 'onPlayerConsumableCallback(world, player, tile, clickedPlayer, itemID)',
                    description: 'Triggered when a player uses a consumable item.'
                }, {
                    section: 'callbacks',
                    signature: 'onTileWrenchCallback(world, player, tile)',
                    description: 'Triggered when a player wrenches a tile.'
                }, {
                    section: 'callbacks',
                    signature: 'onPlayerWrenchCallback(world, player, wrenchingPlayer)',
                    description: 'Triggered when a player wrenches another player or NPC. You can check `wrenchingPlayer:getType()` to see if it\'s an NPC (e.g., type 25 for Lua-spawned NPCs).'
                }, {
                    section: 'callbacks',
                    signature: 'onPlayerLoginCallback(player)',
                    description: 'Triggered when a player logs into the server.'
                }, {
                    section: 'callbacks',
                    signature: 'onTilePlaceCallback(world, player, tile, placingID)',
                    description: 'Triggered when a player places a tile. Return `true` to prevent placement.'
                }, {
                    section: 'callbacks',
                    signature: 'onPlayerTick(player)',
                    description: 'Called every 1000ms for each online player.'
                }, {
                    section: 'callbacks',
                    signature: 'onWorldTick(world)',
                    description: 'Called every 100ms for each active world.'
                }, {
                    section: 'callbacks',
                    signature: 'onTick()',
                    description: 'Called every 100ms on the server globally.'
                }, {
                    section: 'callbacks',
                    signature: 'onPlayerFirstTimeLoginCallback(player)',
                    description: 'Triggered only on a player\'s very first login to the server.'
                }, {
                    section: 'callbacks',
                    signature: 'onPlayerEnterWorldCallback(world, player)',
                    description: 'Triggered when a player successfully enters a world.'
                }, {
                    section: 'callbacks',
                    signature: 'onPlayerLeaveWorldCallback(world, player)',
                    description: 'Triggered when a player leaves a world.'
                }, {
                    section: 'callbacks',
                    signature: 'onTilePunchCallback(world, avatar, tile)',
                    description: 'Triggered when a player punches a tile. Return `true` to prevent the default break action.'
                }, {
                    section: 'callbacks',
                    signature: 'onPlayerDisconnectCallback(player)',
                    description: 'Triggered when a player disconnects from the server.'
                }, {
                    section: 'callbacks',
                    signature: 'onPlayerDeathCallback(world, player, isRespawn)',
                    description: 'Triggered when a player dies or respawns. `isRespawn` is true if the player is respawning.'
                }, {
                    section: 'callbacks',
                    signature: 'onPlayerDropCallback(world, player, itemID, itemCount)',
                    description: 'Triggered when a player drops an item. Return `true` to prevent the drop.'
                }, {
                    section: 'callbacks',
                    signature: 'onPlayerLevelUPCallback(world, player, levelReached)',
                    description: 'Triggered when a player levels up.'
                }, {
                    section: 'callbacks',
                    signature: 'onPlayerEquipClothingCallback(world, player, itemID)',
                    description: 'Triggered when a player tries to equip an item. Return `true` to prevent equipping.'
                }, {
                    section: 'callbacks',
                    signature: 'onPlayerUnequipClothingCallback(world, player, itemID)',
                    description: 'Triggered when a player tries to unequip an item. Return `true` to prevent unequipping.'
                }, {
                    section: 'callbacks',
                    signature: 'onPlayerPickupItemCallback(world, player, itemID, itemCount)',
                    description: 'Triggered when a player picks up an item. Return `true` to prevent the pickup.'
                }, {
                    section: 'callbacks',
                    signature: 'onPlayerEnterDoorCallback(world, player, targetWorldName, doorID)',
                    description: 'Triggered when a player enters a door. Return `true` to prevent entry.'
                }, {
                    section: 'callbacks',
                    signature: 'onPlayerPlantCallback(world, player, tile)',
                    description: 'Triggered when a player plants a seed.'
                }, {
                    section: 'callbacks',
                    signature: 'onPlayerHarvestCallback(world, player, tile)',
                    description: 'Triggered when a player harvests a tree.'
                }, {
                    section: 'callbacks',
                    signature: 'onPlayerCatchFishCallback(world, player, itemID, itemCount)',
                    description: 'Triggered when a player catches a fish.'
                }, {
                    section: 'callbacks',
                    signature: 'onPlayerCrimeCallback(world, player, itemID, itemCount)',
                    description: 'Related to moderation actions or "crimes".'
                }, {
                    section: 'callbacks',
                    signature: 'onPlayerSurgeryCallback(world, player, itemID, itemCount, targetPlayer)',
                    description: 'Triggered during a surgery action. `targetPlayer` is the player receiving surgery (can be nil).'
                }, {
                    section: 'callbacks',
                    signature: 'onPlayerKillCallback(world, player, killedPlayer)',
                    description: 'Triggered when a player kills another player (e.g., in a PVP world).'
                }, {
                    section: 'callbacks',
                    signature: 'onPlayerProviderCallback(world, player, tile, itemID, itemCount)',
                    description: 'Triggered when a player receives items from a provider block.'
                }, {
                    section: 'callbacks',
                    signature: 'onPlayerHarmonicCallback(world, player, tile, itemID, itemCount)',
                    description: 'Related to harmonic crystals.'
                }, {
                    section: 'callbacks',
                    signature: 'onPlayerGeigerCallback(world, player, itemID, itemCount)',
                    description: 'Triggered when a player finds something with a Geiger counter.'
                }, {
                    section: 'callbacks',
                    signature: 'onPlayerCatchGhostCallback(world, player, itemID, itemCount)',
                    description: 'Triggered when a player catches a ghost.'
                }, {
                    section: 'callbacks',
                    signature: 'onPlayerXPCallback(world, player, amount)',
                    description: 'Triggered when a player gains experience points.'
                }, {
                    section: 'callbacks',
                    signature: 'onPlayerFirePutOutCallback(world, player, tile)',
                    description: 'Triggered when a player extinguishes a fire.'
                }, {
                    section: 'callbacks',
                    signature: 'onPlayerEarnGrowtokenCallback(world, player, itemCount)',
                    description: 'Triggered when a player earns a Growtoken.'
                }, {
                    section: 'callbacks',
                    signature: 'onPlayerTrainFishCallback(world, player)',
                    description: 'Called once a player has trained a fish.'
                }, {
                    section: 'callbacks',
                    signature: 'onPlayerGemsObtainedCallback(world, player, amount)',
                    description: 'Triggered when a player obtains gems through various actions.'
                }, {
                    section: 'callbacks',
                    signature: 'onTileBreakCallback(world, player, tile)',
                    description: 'A generic callback for when any tile is broken.'
                }, {
                    section: 'callbacks',
                    signature: 'onPlayerAddFriendCallback(world, player, addedPlayer)',
                    description: 'Triggered when a player adds another player as a friend.'
                }, {
                    section: 'callbacks',
                    signature: 'onPlayerTradeCallback(world, player1, player2, items1, items2)',
                    description: 'Triggered upon a successful trade. `items1` and `items2` are tables of traded items.'
                }, {
                    section: 'callbacks',
                    signature: 'onPlayerVariantCallback(player, variant, delay, netID)',
                    description: 'A low-level callback for handling various client packets (variants). Advanced use only.'
                }, {
                    section: 'callbacks',
                    signature: 'onPlayerRawPacketCallback(player, data)',
                    description: 'A very low-level callback for handling raw network packets from a player. Advanced use only.'
                }, {
                    section: 'callbacks',
                    signature: 'onPlayerEquippedClothingCallback(world, player, item_id)',
                    description: 'Called AFTER a player successfully equips an item.'
                }, {
                    section: 'callbacks',
                    signature: 'onPlayerUnequippedClothingCallback(world, player, item_id)',
                    description: 'Called AFTER a player successfully unequips an item.'
                }, {
                    section: 'callbacks',
                    signature: 'onPlayerTrashCallback(world, player, item_id, item_amount)',
                    description: 'Triggered when a player trashes an item. Return `true` to prevent trashing.'
                }, {
                    section: 'callbacks',
                    signature: 'onPlayerRecycleCallback(world, player, item_id, item_amount, gems_earned)',
                    description: 'Triggered when a player recycles an item. Return `true` to prevent recycling.'
                }, {
                    section: 'callbacks',
                    signature: 'onPlayerPunchPlayerCallback(world, player, second_player)',
                    description: 'Triggered when a player punches another player.'
                }, {
                    section: 'callbacks',
                    signature: 'onPlayerPunchNPCCallback(world, player, npc_player)',
                    description: 'Triggered when a player punches an NPC.'
                }, {
                    section: 'callbacks',
                    signature: 'onEventChangedCallback(newEventID, oldEventID)',
                    description: 'Triggered when the server-wide event changes.'
                }, {
                    section: 'callbacks',
                    signature: 'onPlayerActionCallback(world, player, data)',
                    description: 'A generic callback for various player actions, often from UI buttons. `data["action"]` contains the action name.'
                }, {
                    section: 'callbacks',
                    signature: 'onAutoSaveRequest()',
                    description: 'Triggered periodically by the server to request data saving. Use `saveDataToServer` here.'
                }, {
                    section: 'callbacks',
                    signature: 'onDiscordMessageCreateCallback(event)',
                    description: 'Triggered when a message is created in a linked Discord channel.'
                }, {
                    section: 'callbacks',
                    signature: 'onPlayerDNACallback(world, player, resultID, resultAmount)',
                    description: 'Triggered when a player uses a DNA Combiner.'
                }, {
                    section: 'callbacks',
                    signature: 'onWorldLoaded(world)',
                    description: 'Called once a world is loaded into memory.'
                }, {
                    section: 'callbacks',
                    signature: 'onWorldOffloaded(world)',
                    description: 'Called once a world is removed from memory.'
                }, {
                    section: 'callbacks',
                    signature: 'onPlayerBoostClaimCallback(player)',
                    description: 'Triggered when a player claims a boost.'
                }, {
                    section: 'callbacks',
                    signature: 'onPlayerRegisterCallback(world, player)',
                    description: 'Triggered when a player registers a new account. Useful for giving starter packs.'
                }, {
                    section: 'callbacks',
                    signature: 'onPlayerConvertItemCallback(world, player, item_id)',
                    description: 'Triggered when a player double-taps specific items to convert them (e.g., 100 WLs to 1 DL). Return true to prevent default behavior.'
                }, {
                    section: 'callbacks',
                    signature: 'onHTTPRequest(req)',
                    description: 'Triggered when an HTTP request is made to the server port. `req` contains `method`, `path`, `body`, `headers`. Must return a response table.'
                }, {
                    section: 'callbacks',
                    signature: 'onDiscordButtonClickCallback(event)',
                    description: 'Triggered when a button is clicked in Discord.'
                }, {
                    section: 'callbacks',
                    signature: 'onDiscordFormSubmitCallback(event)',
                    description: 'Triggered when a modal form is submitted in Discord.'
                }, {
                    section: 'callbacks',
                    signature: 'onPlayerDungeonEntitySlainCallback(world, player, entity_type)',
                    description: 'Triggered when a player slays a dungeon entity.'
                }, {
                    section: 'callbacks',
                    signature: 'onPlayerStartopiaCallback(world, player, item_id, item_count)',
                    description: 'Triggered for Startopia rewards.'
                }, {
                    section: 'callbacks',
                    signature: 'onPlayerCookingCallback(world, player, item_id, item_count)',
                    description: 'Triggered for Cooking rewards.'
                },
                // Commands
                {
                    section: 'commands',
                    signature: 'registerLuaCommand(commandData)',
                    description: 'Registers a new custom slash command. `commandData` is a table: `{ command="name", roleRequired=0, description="desc" }`.'
                }, {
                    section: 'commands',
                    signature: 'onPlayerCommandCallback(world, player, fullCommand)',
                    description: 'Handles the execution of custom slash commands. Return `true` if you handle the command.'
                },
                // Dialogs
                {
                    section: 'dialogs',
                    signature: 'set_default_color|color',
                    description: 'Sets the default dialog text color (e.g., `\\`o`).'
                }, {
                    section: 'dialogs',
                    signature: 'set_border_color|r,g,b,a|',
                    description: 'Sets the dialog border color.'
                }, {
                    section: 'dialogs',
                    signature: 'set_bg_color|r,g,b,a|',
                    description: 'Sets the dialog background color.'
                }, {
                    section: 'dialogs',
                    signature: 'set_custom_spacing|x:value;y:value|',
                    description: 'Adds custom horizontal and vertical spacing between elements.'
                }, {
                    section: 'dialogs',
                    signature: 'add_custom_break|',
                    description: 'Adds a line break.'
                }, {
                    section: 'dialogs',
                    signature: 'start_custom_tabs|',
                    description: 'Starts a container for custom tabs.'
                }, {
                    section: 'dialogs',
                    signature: 'end_custom_tabs|',
                    description: 'Ends a container for custom tabs.'
                }, {
                    section: 'dialogs',
                    signature: 'disable_resize|',
                    description: 'Disables automatic dialog resizing.'
                }, {
                    section: 'dialogs',
                    signature: 'reset_placement_x|',
                    description: 'Resets horizontal placement.'
                }, {
                    section: 'dialogs',
                    signature: 'add_label|size|message|alignment',
                    description: 'Adds a text label (size: big/small, alignment: left/center/right).'
                }, {
                    section: 'dialogs',
                    signature: 'add_smalltext|message|',
                    description: 'Adds small text.'
                }, {
                    section: 'dialogs',
                    signature: 'add_textbox|message|',
                    description: 'Adds a text box with a message.'
                }, {
                    section: 'dialogs',
                    signature: 'add_button|name|label|flags|0|0',
                    description: 'Adds a standard button.'
                }, {
                    section: 'dialogs',
                    signature: 'add_small_font_button|name|label|flags|0|0',
                    description: 'Adds a button with a smaller font.'
                }, {
                    section: 'dialogs',
                    signature: 'add_text_input|name|message|defaultInput|length',
                    description: 'Adds a text input field.'
                }, {
                    section: 'dialogs',
                    signature: 'add_checkbox|name|message|checked',
                    description: 'Adds a checkbox. `checked` is 1 for true, 0 for false.'
                }, {
                    section: 'dialogs',
                    signature: 'add_item_picker|name|message|placeholder|',
                    description: 'Adds a searchable item picker.'
                }, {
                    section: 'dialogs',
                    signature: 'add_spacer|size|',
                    description: 'Adds a vertical spacer (size: big/small).'
                }, {
                    section: 'dialogs',
                    signature: 'add_quick_exit|',
                    description: 'Adds a quick exit "X" button to the dialog.'
                }, {
                    section: 'dialogs',
                    signature: 'embed_data|embed|data|',
                    description: 'Embeds data into the dialog, often used to set the `dialog_name`.'
                }, {
                    section: 'dialogs',
                    signature: 'add_label_with_icon|size|message|alignment|iconID',
                    description: 'Adds a label prefixed with an item icon.'
                }, {
                    section: 'dialogs',
                    signature: 'add_button_with_icon|name|text|options|itemID|...|',
                    description: 'A versatile button with an icon and various display options. See examples in text file.'
                }, {
                    section: 'dialogs',
                    signature: 'add_player_info|name|level|exp|expRequired',
                    description: 'Displays a player info block.'
                }, {
                    section: 'dialogs',
                    signature: 'add_progress_bar|name|size|text|current|max|color|',
                    description: 'Adds a progress bar.'
                }, {
                    section: 'dialogs',
                    signature: 'add_image_button|name|imagePath|flags|open|label|',
                    description: 'Adds a button with a custom image.'
                }, {
                    section: 'dialogs',
                    signature: 'add_tab_button|name|label|iconPath|x|y',
                    description: 'Adds a tab button.'
                }, {
                    section: 'dialogs',
                    signature: 'add_banner|imagePath|x|y|',
                    description: 'Adds a banner.'
                }, {
                    section: 'dialogs',
                    signature: 'add_big_banner|imagePath|x|y|text|',
                    description: 'Adds a larger banner with text.'
                }, {
                    section: 'dialogs',
                    signature: 'add_searchable_item_list|data|options|searchFixedName',
                    description: 'Adds a searchable list of items. Options e.g., `listType:iconGrid;resultLimit:12`.'
                }, {
                    section: 'dialogs',
                    signature: 'add_dual_layer_icon_label|size|message|alignment|iconID|bg|fg|size|toggle',
                    description: 'Adds a dual-layer icon label.'
                }, {
                    section: 'dialogs',
                    signature: 'add_seed_color_icons|itemID',
                    description: 'Adds seed color icons for a specific item.'
                }, {
                    section: 'dialogs',
                    signature: 'add_label_with_icon_button|size|message|alignment|iconID|buttonName',
                    description: 'Adds a label with an icon and a button.'
                }, {
                    section: 'dialogs',
                    signature: 'add_achieve_button|achName|achToGet|achID|unk',
                    description: 'Adds an achievement button.'
                }, {
                    section: 'dialogs',
                    signature: 'add_community_button|button|btnName|flags|0|0',
                    description: 'Adds a community button.'
                }, {
                    section: 'dialogs',
                    signature: 'add_friend_image_label_button|name|label|texture_path|size|texture_x|texture_y|',
                    description: 'Adds a button with a friend image.'
                }, {
                    section: 'dialogs',
                    signature: 'add_custom_button|name|option|',
                    description: 'Adds a custom button.'
                }, {
                    section: 'dialogs',
                    signature: 'add_custom_label|option1|option2|',
                    description: 'Adds a custom label with options.'
                }, {
                    section: 'dialogs',
                    signature: 'add_custom_spacer|x:value|',
                    description: 'Adds a custom spacer with a specified width.'
                }, {
                    section: 'dialogs',
                    signature: 'add_custom_textbox|text|size:value|',
                    description: 'Adds a custom textbox with a specified size.'
                }, {
                    section: 'dialogs',
                    signature: 'add_cmmnty_ft_wrld_bttn|worldName|ownerName|worldName|',
                    description: 'Adds a community feature world button.'
                }, {
                    section: 'dialogs',
                    signature: 'add_cmmnty_wotd_bttn|top|worldName|ownerName|imagePath|x|y|worldName|',
                    description: 'Adds a community WOTD button.'
                }, {
                    section: 'dialogs',
                    signature: 'community_hub_type|hubType|',
                    description: 'Sets the community hub type.'
                }, {
                    section: 'dialogs',
                    signature: 'enable_tabs|enable|',
                    description: 'Enables or disables tabs.'
                },
                // Player
                {
                    section: 'player',
                    signature: 'player:getLevel()',
                    description: 'Returns the player\'s current level.'
                }, {
                    section: 'player',
                    signature: 'player:addLevel(amount)',
                    description: 'Adds a specified number of levels to the player.'
                }, {
                    section: 'player',
                    signature: 'player:removeLevel(amount)',
                    description: 'Removes a specified number of levels from the player.'
                }, {
                    section: 'player',
                    signature: 'player:setLevel(level)',
                    description: 'Sets the player\'s level to a specific value.'
                }, {
                    section: 'player',
                    signature: 'player:setXP(amount)',
                    description: 'Sets the player\'s total experience points to a specific value.'
                }, {
                    section: 'player',
                    signature: 'player:removeXP(amount)',
                    description: 'Removes a specific amount of experience points from the player.'
                }, {
                    section: 'player',
                    signature: 'player:getGems()',
                    description: 'Returns the player\'s gem count.'
                }, {
                    section: 'player',
                    signature: 'player:addGems(amount, sendPacket, isDisplay)',
                    description: 'Adds a specified amount of gems to the player.'
                }, {
                    section: 'player',
                    signature: 'player:removeGems(amount, sendPacket, isDisplay)',
                    description: 'Removes a specified amount of gems from the player.'
                }, {
                    section: 'player',
                    signature: 'player:setGems(amount)',
                    description: 'Sets the player\'s gem count to a specific value.'
                }, {
                    section: 'player',
                    signature: 'player:getCoins()',
                    description: 'Returns the player\'s coin count.'
                }, {
                    section: 'player',
                    signature: 'player:addCoins(amount, sendPacket)',
                    description: 'Adds coins to the player.'
                }, {
                    section: 'player',
                    signature: 'player:removeCoins(amount, sendPacket)',
                    description: 'Removes coins from the player.'
                }, {
                    section: 'player',
                    signature: 'player:setCoins(amount)',
                    description: 'Sets the player\'s coin count to a specific value.'
                }, {
                    section: 'player',
                    signature: 'player:getBankBalance()',
                    description: 'Returns the player\'s bank balance.'
                }, {
                    section: 'player',
                    signature: 'player:addBankBalance(amount)',
                    description: 'Adds to the player\'s bank balance.'
                }, {
                    section: 'player',
                    signature: 'player:removeBankBalance(amount)',
                    description: 'Removes from the player\'s bank balance.'
                }, {
                    section: 'player',
                    signature: 'player:setBankBalance(amount)',
                    description: 'Sets the player\'s bank balance to a specific value.'
                }, {
                    section: 'player',
                    signature: 'player:ban(length_seconds, reason, banned_by_player, ban_device, ban_ip)',
                    description: 'Bans the player. `length_seconds = 0` for a permanent ban. `banned_by_player` is another player object (can be nil). `ban_device` and `ban_ip` are 0 (no) or 1 (yes).'
                }, {
                    section: 'player',
                    signature: 'player:onConsoleMessage(message)',
                    description: 'Sends a message to the player\'s in-game console.'
                }, {
                    section: 'player',
                    signature: 'player:onTalkBubble(netID, message, isApi)',
                    description: 'Displays a talk bubble above a player. Use `player:getNetID()` for self.'
                }, {
                    section: 'player',
                    signature: 'player:onDialogRequest(dialogString, delay, callback)',
                    description: 'Sends a dialog to the player. The `callback` function is optional and handles the response directly.'
                }, {
                    section: 'player',
                    signature: 'player:getNetID()',
                    description: 'Returns the player\'s network ID.'
                }, {
                    section: 'player',
                    signature: 'player:getUserID()',
                    description: 'Returns the player\'s unique user ID.'
                }, {
                    section: 'player',
                    signature: 'player:playAudio(filePath, delay)',
                    description: 'Plays an audio file for the player (e.g., "audio/ding.wav").'
                }, {
                    section: 'player',
                    signature: 'player:getItemAmount(itemID)',
                    description: 'Returns the amount of a specific item the player has in their inventory.'
                }, {
                    section: 'player',
                    signature: 'player:changeItem(itemID, amount, isSendPacket)',
                    description: 'Adds (`amount` > 0) or removes (`amount` < 0) an item from the player\'s inventory.'
                }, {
                    section: 'player',
                    signature: 'player:enterWorld(worldName, doorID)',
                    description: 'Teleports the player to a specified world.'
                }, {
                    section: 'player',
                    signature: 'player:getWorldName()',
                    description: 'Returns the name of the world the player is currently in.'
                }, {
                    section: 'player',
                    signature: 'player:onTextOverlay(text)',
                    description: 'Displays a large text overlay on the player\'s screen.'
                }, {
                    section: 'player',
                    signature: 'player:getCleanName()',
                    description: 'Returns the player\'s name without any special formatting.'
                }, {
                    section: 'player',
                    signature: 'player:hasRole(role)',
                    description: 'Checks if the player has a specific role ID. (e.g., `Roles.ROLE_ADMIN`).'
                }, {
                    section: 'player',
                    signature: 'player:setRole(role)',
                    description: 'Sets the player\'s role ID.'
                }, {
                    section: 'player',
                    signature: 'player:getMod(playModID)',
                    description: 'Returns the player\'s mod.'
                }, {
                    section: 'player',
                    signature: 'player:addMod(modID, durationSeconds)',
                    description: 'Adds a temporary modification (e.g., curse, buff) to the player.'
                }, {
                    section: 'player',
                    signature: 'player:removeMod(modID)',
                    description: 'Removes a modification from the player.'
                }, {
                    section: 'player',
                    signature: 'player:getCountry()',
                    description: 'Returns the player\'s country code (e.g., "us").'
                }, {
                    section: 'player',
                    signature: 'player:setCountry(countryCode)',
                    description: 'Changes the country flag of a player. Example: `player:setCountry("us")`.'
                }, {
                    section: 'player',
                    signature: 'player:getPlatform()',
                    description: 'Returns the player\'s platform ID (0: Win, 1: iOS, 2: macOS, 4: Android).'
                }, {
                    section: 'player',
                    signature: 'player:sendVariant(variantTable, delay, netID)',
                    description: 'Sends a raw variant packet to the player. Examples: `{"OnTalkBubble", netID, "Msg"}`, `{"OnConsoleMessage", "Msg"}`, `{"OnCountdownStart", 60, -1}`. Advanced use.'
                }, {
                    section: 'player',
                    signature: 'player:sendAction(actionString)',
                    description: 'Sends a default Growtopia action string (e.g., for sound effects like `action|play_sfx...`).'
                }, {
                    section: 'player',
                    signature: 'player:getInventoryItems()',
                    description: 'Returns a table of all items in the player\'s inventory. Iterate through it to access individual items.'
                }, {
                    section: 'player',
                    signature: 'player:getWorld()',
                    description: 'Returns the world object the player is currently in.'
                }, {
                    section: 'player',
                    signature: 'player:disconnect()',
                    description: 'Disconnects the player from the server.'
                }, {
                    section: 'player',
                    signature: 'player:hasTitle(id)',
                    description: 'Checks if the player has unlocked a specific title.'
                }, {
                    section: 'player',
                    signature: 'player:addTitle(id)',
                    description: 'Adds a title to the player.'
                }, {
                    section: 'player',
                    signature: 'player:removeTitle(id)',
                    description: 'Removes a title from the player.'
                }, {
                    section: 'player',
                    signature: 'player:isOnline()',
                    description: 'Checks if the player object corresponds to an online player.'
                }, {
                    section: 'player',
                    signature: 'player:getType()',
                    description: 'Returns the player\'s type. Non-zero means it is an NPC. Lua-spawned NPCs will have a type of 25.'
                }, {
                    section: 'player',
                    signature: 'player:isFacingLeft()',
                    description: 'Returns `true` if the player is facing left.'
                }, {
                    section: 'player',
                    signature: 'player:addMail(mailDataTable)',
                    description: 'Adds a new mail to the player\'s mailbox.'
                }, {
                    section: 'player',
                    signature: 'player:clearMailbox()',
                    description: 'Clears all mail from the player\'s mailbox.'
                }, {
                    section: 'player',
                    signature: 'player:setNickname(name)',
                    description: 'Sets the player\'s display name. Now supports all characters and persists after relogin.'
                }, {
                    section: 'player',
                    signature: 'player:resetNickname()',
                    description: 'Resets the player\'s display name to their original name.'
                }, {
                    section: 'player',
                    signature: 'player:onClothesUI(targetPlayer)',
                    description: 'Shows the clothing UI of a target player.'
                }, {
                    section: 'player',
                    signature: 'player:onAchievementsUI(targetPlayer)',
                    description: 'Shows the achievements UI for a target player.'
                }, {
                    section: 'player',
                    signature: 'player:onTitlesUI(targetPlayer)',
                    description: 'Shows the titles UI for a target player.'
                }, {
                    section: 'player',
                    signature: 'player:onTradeScanUI()',
                    description: 'Shows the trade scan UI.'
                }, {
                    section: 'player',
                    signature: 'player:onGrow4GoodUI()',
                    description: 'Shows the Grow4Good UI.'
                }, {
                    section: 'player',
                    signature: 'player:onRedeemMenu()',
                    description: 'Sends a redeem menu to the player.'
                }, {
                    section: 'player',
                    signature: 'player:getClothingItemID(slot)',
                    description: 'Gets the item ID of clothing in a specific slot (e.g., `PlayerClothes.HAND`).'
                }, {
                    section: 'player',
                    signature: 'player:getUnlockedAchievementsCount()',
                    description: 'Returns the number of achievements the player has unlocked.'
                }, {
                    section: 'player',
                    signature: 'player:getAchievementsCount()',
                    description: 'Returns the total number of available achievements.'
                }, {
                    section: 'player',
                    signature: 'player:getBackpackUsedSize()',
                    description: 'Returns the number of used slots in the backpack.'
                }, {
                    section: 'player',
                    signature: 'player:setNextDialogRGBA(r, g, b, a)',
                    description: 'Sets the background color of the next dialog.'
                }, {
                    section: 'player',
                    signature: 'player:setNextDialogBorderRGBA(r, g, b, a)',
                    description: 'Sets the border color of the next dialog.'
                }, {
                    section: 'player',
                    signature: 'player:resetDialogColor()',
                    description: 'Resets dialog colors to default. Must be called after using custom colors.'
                }, {
                    section: 'player',
                    signature: 'player:setCountryFlagForeground(item_id)',
                    description: 'Sets the player\'s country flag foreground item. Use 0 to remove.'
                }, {
                    section: 'player',
                    signature: 'player:getCountryFlagForeground()',
                    description: 'Returns the item ID of the player\'s country flag foreground.'
                }, {
                    section: 'player',
                    signature: 'player:setCountryFlagBackground(item_id)',
                    description: 'Sets the player\'s country flag background item. Use 0 to remove.'
                }, {
                    section: 'player',
                    signature: 'player:getCountryFlagBackground()',
                    description: 'Returns the item ID of the player\'s country flag background.'
                }, {
                    section: 'player',
                    signature: 'player:getInventorySize()',
                    description: 'Returns the player\'s inventory size.'
                }, {
                    section: 'player',
                    signature: 'player:isMaxInventorySpace()',
                    description: 'Returns true if the player\'s inventory is full.'
                }, {
                    section: 'player',
                    signature: 'player:upgradeInventorySpace(amount)',
                    description: 'Upgrades the player\'s inventory space.'
                }, {
                    section: 'player',
                    signature: 'player:onStorePurchaseResult()',
                    description: 'Sends a store purchase result to the player.'
                }, {
                    section: 'player',
                    signature: 'player:onGrow4GoodDonate()',
                    description: 'Fires Grow4GoodDonate Event.'
                }, {
                    section: 'player',
                    signature: 'player:getSubscription(subscription)',
                    description: 'Returns the player\'s specified subscription status.'
                }, {
                    section: 'player',
                    signature: 'player:getHomeWorldID()',
                    description: 'Returns Player\'s Home World ID.'
                }, {
                    section: 'player',
                    signature: 'player:getOnlineStatus()',
                    description: 'Returns The Online Status.'
                }, {
                    section: 'player',
                    signature: 'player:getGuildID()',
                    description: 'Returns the Guild ID.'
                }, {
                    section: 'player',
                    signature: 'player:getTransformProfileButtons()',
                    description: 'Returns Player\'s TransformProfile Buttons.'
                }, {
                    section: 'player',
                    signature: 'player:getDiscordID()',
                    description: 'Returns the Player\'s Discord ID.'
                }, {
                    section: 'player',
                    signature: 'player:getAccountCreationDateStr()',
                    description: 'Returns the Account Creation Date.'
                }, {
                    section: 'player',
                    signature: 'player:getClassicProfileContent(cat, flags)',
                    description: 'Returns the ClassicProfile Content.'
                }, {
                    section: 'player',
                    signature: 'player:onGuildNotebookUI()',
                    description: 'Returns The GuildNotebook UI.'
                }, {
                    section: 'player',
                    signature: 'player:onGrowmojiUI()',
                    description: 'Shows the Growmoji UI.'
                }, {
                    section: 'player',
                    signature: 'player:onGrowpassUI()',
                    description: 'Shows the Growpass UI.'
                }, {
                    section: 'player',
                    signature: 'player:onNotebookUI()',
                    description: 'Shows the Notebook UI.'
                }, {
                    section: 'player',
                    signature: 'player:onBillboardUI()',
                    description: 'Shows the Billboard UI.'
                }, {
                    section: 'player',
                    signature: 'player:onPersonalizeWrenchUI()',
                    description: 'Shows the Personalize Wrench UI.'
                }, {
                    section: 'player',
                    signature: 'player:onOnlineStatusUI()',
                    description: 'Shows the Online Status UI.'
                }, {
                    section: 'player',
                    signature: 'player:onFavItemsUI()',
                    description: 'Shows the Favorite Items UI.'
                }, {
                    section: 'player',
                    signature: 'player:onCoinsBankUI()',
                    description: 'Shows the Coins Bank UI.'
                }, {
                    section: 'player',
                    signature: 'player:onUnlinkDiscordUI()',
                    description: 'Shows the Unlink Discord UI.'
                }, {
                    section: 'player',
                    signature: 'player:onLinkDiscordUI()',
                    description: 'Shows the Link Discord UI.'
                }, {
                    section: 'player',
                    signature: 'player:onWrenchIconsUI(targetPlayer)',
                    description: 'Shows the Wrench Icons UI for a target player.'
                }, {
                    section: 'player',
                    signature: 'player:onNameIconsUI(targetPlayer)',
                    description: 'Shows the Name Icons UI for a target player.'
                }, {
                    section: 'player',
                    signature: 'player:onVouchersUI()',
                    description: 'Shows the Vouchers UI.'
                }, {
                    section: 'player',
                    signature: 'player:onMentorshipUI()',
                    description: 'Shows the Mentorship UI.'
                }, {
                    section: 'player',
                    signature: 'player:onBackpackUI(targetPlayer)',
                    description: 'Shows the Backpack UI for a target player.'
                }, {
                    section: 'player',
                    signature: 'player:setRoleQuestLevel(type, level)',
                    description: 'Sets the player\'s role quest level for a specific type (e.g., `PlayerRoleQuestTypes.Farmer`).'
                }, {
                    section: 'player',
                    signature: 'player:getRoleQuestLevel(type)',
                    description: 'Gets the player\'s role quest level for a specific type.'
                }, {
                    section: 'player',
                    signature: 'player:getIP()',
                    description: 'Returns the player\'s IP address as a string.'
                }, {
                    section: 'player',
                    signature: 'player:getRID()',
                    description: 'Returns the player\'s unique identifier (RID) as a string.'
                }, {
                    section: 'player',
                    signature: 'player:setPassword(newPassword)',
                    description: 'Sets the player\'s account password.'
                }, {
                    section: 'player',
                    signature: 'player:getEmail()',
                    description: 'Returns the player\'s email address.'
                }, {
                    section: 'player',
                    signature: 'player:getBackpackItems()',
                    description: 'Returns a table of all items in the player\'s backpack.'
                }, {
                    section: 'player',
                    signature: 'player:getGender()',
                    description: 'Returns the player\'s gender.'
                }, {
                    section: 'player',
                    signature: 'player:getPlaytime()',
                    description: 'Returns the player\'s total playtime in seconds.'
                }, {
                    section: 'player',
                    signature: 'player:hasActiveBlessing(blessing_id)',
                    description: 'Checks if a player has an active blessing. Returns false if the power orb is disabled.'
                }, {
                    section: 'player',
                    signature: 'player:hasBlessing(blessing_id)',
                    description: 'Checks if a player has a blessing, regardless of power orb state.'
                }, {
                    section: 'player',
                    signature: 'player:removeBlessing(blessing_id)',
                    description: 'Removes a blessing from a player.'
                }, {
                    section: 'player',
                    signature: 'player:addBlessing(blessing_id)',
                    description: 'Adds a blessing to a player.'
                }, {
                    section: 'player',
                    signature: 'player:checkPassword(passwordString)',
                    description: 'Checks if the provided password string matches the player\'s account password. Returns true if it matches.'
                }, {
                    section: 'player',
                    signature: 'player:getDiscordInvites()',
                    description: 'Returns the number of Discord invites a player has.'
                }, {
                    section: 'player',
                    signature: 'player:getAltAccounts()',
                    description: 'Returns an array of alternative accounts linked to this player.'
                }, {
                    section: 'player',
                    signature: 'player:getOwnedWorlds()',
                    description: 'Returns a list of World IDs that the player owns.'
                }, {
                    section: 'player',
                    signature: 'player:getRecentWorlds()',
                    description: 'Returns a list of World IDs the player recently entered.'
                }, {
                    section: 'player',
                    signature: 'player:getAccessWorlds()',
                    description: 'Returns a list of World IDs where the player has build access.'
                }, {
                    section: 'player',
                    signature: 'player:getSmallLockedWorlds()',
                    description: 'Returns a list of World IDs locked by the player using Small/Big/Huge locks.'
                }, {
                    section: 'player',
                    signature: 'player:getIPHistory()',
                    description: 'Returns a list of IP addresses recently used by the account.'
                }, {
                    section: 'player',
                    signature: 'player:getRIDHistory()',
                    description: 'Returns a list of RIDs recently used by the account.'
                }, {
                    section: 'player',
                    signature: 'player:doAction(actionString)',
                    description: 'Sends a packet on behalf of the player. Example: `player:doAction("action|input\\n|text|hello")`.'
                }, {
                    section: 'player',
                    signature: 'player:setBroadcastWorld(worldName)',
                    description: 'Sets the custom broadcast world for this specific player.'
                }, {
                    section: 'player',
                    signature: 'player:getRole()',
                    description: 'Returns the player\'s role object (contains flags, priority, name, etc).'
                }, {
                    section: 'player',
                    signature: 'player:getFriends()',
                    description: 'Returns a table with friend user IDs.'
                }, {
                    section: 'player',
                    signature: 'player:addFriend(targetPlayer)',
                    description: 'Adds a new friend. Also updates the friend\'s list.'
                }, {
                    section: 'player',
                    signature: 'player:removeFriend(targetPlayer)',
                    description: 'Removes a friend. Also updates the friend\'s list.'
                }, {
                    section: 'player',
                    signature: 'player:getLifeGoals()',
                    description: 'Returns a table with the player\'s Life Goal tasks.'
                }, {
                    section: 'player',
                    signature: 'player:getBiweeklyQuests()',
                    description: 'Returns a table with the player\'s Biweekly Quest tasks.'
                }, {
                    section: 'player',
                    signature: 'player:addGrowpassPoints(points)',
                    description: 'Adds Growpass points to a player.'
                }, {
                    section: 'player',
                    signature: 'player:adjustBlockHitCount(amount)',
                    description: 'Adjusts the number of hits required to break blocks for this player. 1 makes it harder, -1 makes it easier (max +10/-10).'
                }, {
                    section: 'player',
                    signature: 'player:getAdjustedBlockHitCount()',
                    description: 'Returns the current adjusted block hit count value.'
                }, {
                    section: 'player',
                    signature: 'player:setStats(type, amount)',
                    description: 'Sets a specific player stat.'
                }, {
                    section: 'player',
                    signature: 'player:getPing()',
                    description: 'Returns the player\'s ping in milliseconds.'
                }, {
                    section: 'player',
                    signature: 'player:setDungeonScrolls(amount)',
                    description: 'Sets the number of dungeon scrolls a player has (max 255).'
                }, {
                    section: 'player',
                    signature: 'player:getDungeonScrolls()',
                    description: 'Returns the number of dungeon scrolls a player has.'
                },
                // World
                {
                    section: 'world',
                    signature: 'world:getOwner()',
                    description: 'Returns the player object of the world\'s owner, if one exists.'
                }, {
                    section: 'world',
                    signature: 'world:getName()',
                    description: 'Returns the world\'s name.'
                }, {
                    section: 'world',
                    signature: 'world:useItemEffect(playerNetID, itemID, targetNetID, effectDelay)',
                    description: 'Triggers a visual item effect in the world.'
                }, {
                    section: 'world',
                    signature: 'world:updateClothing(player)',
                    description: 'Forces a visual update of a player\'s clothing for everyone in the world.'
                }, {
                    section: 'world',
                    signature: 'world:spawnGems(x, y, amount, player)',
                    description: 'Spawns gems at a specific tile coordinate.'
                }, {
                    section: 'world',
                    signature: 'world:getVisiblePlayersCount()',
                    description: 'Returns the number of visible players in the world.'
                }, {
                    section: 'world',
                    signature: 'world:getPlayersCount(includeInvisible)',
                    description: 'Returns the number of players in the world. Pass `1` to include invisible players.'
                }, {
                    section: 'world',
                    signature: 'world:onCreateChatBubble(x, y, text, netID)',
                    description: 'Creates a chat bubble at a specific pixel coordinate.'
                }, {
                    section: 'world',
                    signature: 'world:onCreateExplosion(x, y, radius, power)',
                    description: 'Creates an explosion at a specific pixel coordinate.'
                }, {
                    section: 'world',
                    signature: 'world:addXP(player, amount)',
                    description: 'Adds XP to a player. Recommended over player:addXP for better management.'
                }, {
                    section: 'world',
                    signature: 'world:setPlayerPosition(player, x, y)',
                    description: 'Teleports a player to a specific tile coordinate within the world.'
                }, {
                    section: 'world',
                    signature: 'world:getDroppedItems()',
                    description: 'Returns a table of all dropped items in the world.'
                }, {
                    section: 'world',
                    signature: 'world:getTileDroppedItems(tile)',
                    description: 'Returns a list of dropped items on a specific tile.'
                }, {
                    section: 'world',
                    signature: 'world:removeDroppedItem(dropUID)',
                    description: 'Removes a dropped item by its unique ID.'
                }, {
                    section: 'world',
                    signature: 'world:getTile(x, y)',
                    description: 'Returns the tile object at the specified coordinates.'
                }, {
                    section: 'world',
                    signature: 'world:setTileForeground(tile, itemID, isVisual, player)',
                    description: 'Sets the foreground of a tile. If `isVisual` is true, it\'s a temporary visual change, optionally for a single player.'
                }, {
                    section: 'world',
                    signature: 'world:setTileBackground(tile, itemID, isVisual, player)',
                    description: 'Sets the background of a tile. If `isVisual` is true, it\'s a temporary visual change, optionally for a single player.'
                }, {
                    section: 'world',
                    signature: 'world:kill(player)',
                    description: 'Kills a player in the world.'
                }, {
                    section: 'world',
                    signature: 'world:hasAccess(player)',
                    description: 'Checks if a player has build access to the entire world (e.g., via world lock).'
                }, {
                    section: 'world',
                    signature: 'world:hasTileAccess(player, tile)',
                    description: 'Checks if a player has build access to a specific tile (e.g., via small lock).'
                }, {
                    section: 'world',
                    signature: 'world:punchTile(tile)',
                    description: 'Simulates a punch on a tile, triggering its break logic.'
                }, {
                    section: 'world',
                    signature: 'world:updateTile(tile)',
                    description: 'Forces a visual update for a tile, necessary after using `tile:setTileData`.'
                }, {
                    section: 'world',
                    signature: 'world:getPlayers()',
                    description: 'Returns a table of all player objects currently in the world.'
                }, {
                    section: 'world',
                    signature: 'world:setClothing(player, item_id)',
                    description: 'Force-equips an item onto a player.'
                }, {
                    section: 'world',
                    signature: 'world:adjustGems(player, tile, gem_count, val)',
                    description: 'Adjusts gem count for a player from a tile action.'
                }, {
                    section: 'world',
                    signature: 'world:onLoot(player, tile, gem_count)',
                    description: 'Triggers a loot event for a player from a tile.'
                }, {
                    section: 'world',
                    signature: 'world:getSizeX()',
                    description: 'Get the world size horizontally.'
                }, {
                    section: 'world',
                    signature: 'world:getSizeY()',
                    description: 'Get the world size vertically.'
                }, {
                    section: 'world',
                    signature: 'world:getTiles()',
                    description: 'Returns an array of all tiles in the world.'
                }, {
                    section: 'world',
                    signature: 'world:getTilesByActionType(actionType)',
                    description: 'Returns tiles with a specific action type.'
                }, {
                    section: 'world',
                    signature: 'world:createNPC(name, x, y)',
                    description: 'Spawns an NPC in the world and returns its player object.'
                }, {
                    section: 'world',
                    signature: 'world:findNPCByName(name)',
                    description: 'Finds an NPC by name and returns its player object.'
                }, {
                    section: 'world',
                    signature: 'world:removeNPC(npc)',
                    description: 'Removes an NPC from the world.'
                }, {
                    section: 'world',
                    signature: 'world:setWeather(weather_id)',
                    description: 'Permanently changes the default weather of a world.'
                }, {
                    section: 'world',
                    signature: 'world:isGameActive()',
                    description: 'Returns if a game is active in the world.'
                }, {
                    section: 'world',
                    signature: 'world:onGameWinHighestScore()',
                    description: 'Returns the game\'s highest win score.'
                }, {
                    section: 'world',
                    signature: 'world:getID()',
                    description: 'Returns the world\'s ID.'
                }, {
                    section: 'world',
                    signature: 'world:sendPlayerMessage(player, message)',
                    description: 'Sends a message to a player, can also run commands.'
                }, {
                    section: 'world',
                    signature: 'world:setOwner(user_id)',
                    description: 'Sets the owner of the world by user ID, bypassing world locks.'
                }, {
                    section: 'world',
                    signature: 'world:removeOwner()',
                    description: 'Removes the owner of the world, bypassing world locks.'
                }, {
                    section: 'world',
                    signature: 'world:getWorldType()',
                    description: 'Returns the world type (e.g., 0 for normal, 255 for dungeon).'
                }, {
                    section: 'world',
                    signature: 'World.new(name, sizeX, sizeY, worldType)',
                    description: 'Static method to create a new world object in memory. Use `world:save()` to create it on the server.'
                }, {
                    section: 'world',
                    signature: 'World.newFromTemplate(name, templateFile)',
                    description: 'Static method to create a new world from a .dat template. Use `world:save()` to create it.'
                }, {
                    section: 'world',
                    signature: 'world:save()',
                    description: 'Saves a world created with `World.new` or `World.newFromTemplate` to the server.'
                }, {
                    section: 'world',
                    signature: 'world:delete()',
                    description: 'Deletes a world object from memory if it hasn\'t been saved.'
                }, {
                    section: 'world',
                    signature: 'world:spawnItem(x, y, itemID, count, center)',
                    description: 'Spawns an item. `center`: 1 (default) to center, 0 to not. Returns the dropped item object.'
                }, {
                    section: 'world',
                    signature: 'world:getWorldLock()',
                    description: 'Returns the tile object of the world lock if present, or nil.'
                }, {
                    section: 'world',
                    signature: 'world:redeemCode(player, code)',
                    description: 'Forces the player to redeem a specific code.'
                }, {
                    section: 'world',
                    signature: 'world:addAccess(player, adminType)',
                    description: 'Gives a player access to a World Locked world. `adminType`: 0 for regular, 1 for super-admin.'
                }, {
                    section: 'world',
                    signature: 'world:removeAccess(player)',
                    description: 'Removes a player\'s access to a World Locked world.'
                }, {
                    section: 'world',
                    signature: 'world:addTileAccess(player, tile)',
                    description: 'Gives a player permanent access to a specific tile (e.g., Small Lock).'
                }, {
                    section: 'world',
                    signature: 'world:removeTileAccess(player, tile)',
                    description: 'Removes a player\'s access to a specific tile.'
                }, {
                    section: 'world',
                    signature: 'world:removeAllTileAccess()',
                    description: 'Removes all tile access permissions in the world (emergency command).'
                }, {
                    section: 'world',
                    signature: 'world:getMagplantRemoteTile(player)',
                    description: 'Returns the tile object linked to the player\'s Magplant Remote.'
                }, {
                    section: 'world',
                    signature: 'world:hasFlag(flagID)',
                    description: 'Checks if the world has a specific flag (e.g., 0 for open to public, 1 for signal jammer, etc.).'
                }, {
                    section: 'world',
                    signature: 'world:useConsumable(player, tile, id, should_NOT_trigger_callback)',
                    description: 'Uses a consumable. 4th arg: 1 to suppress callback, 0 to trigger (default).'
                },
                // Tile
                {
                    section: 'tile',
                    signature: 'tile:getTileID()',
                    description: 'Returns the foreground item ID of the tile.'
                }, {
                    section: 'tile',
                    signature: 'tile:getPosX()',
                    description: 'Returns the X coordinate of the tile.'
                }, {
                    section: 'tile',
                    signature: 'tile:getPosY()',
                    description: 'Returns the Y coordinate of the tile.'
                }, {
                    section: 'tile',
                    signature: 'tile:getTileForeground()',
                    description: 'Returns the foreground item ID of the tile.'
                }, {
                    section: 'tile',
                    signature: 'tile:getTileBackground()',
                    description: 'Returns the background item ID of the tile.'
                }, {
                    section: 'tile',
                    signature: 'tile:getTileData(property)',
                    description: 'Gets a specific data property from a tile (e.g., `TileDataProperties.TILE_DATA_TYPE_SEED_FRUITS_COUNT`).'
                }, {
                    section: 'tile',
                    signature: 'tile:setTileData(property, value)',
                    description: 'Sets a specific data property on a tile. Requires `world:updateTile` to show visually. Renamed from `setTileDataInt`.'
                }, {
                    section: 'tile',
                    signature: 'tile:getTileItem()',
                    description: 'Returns the item object associated with the tile\'s foreground.'
                }, {
                    section: 'tile',
                    signature: 'tile:getFlags()',
                    description: 'Returns the bitflags of a tile.'
                }, {
                    section: 'tile',
                    signature: 'tile:setFlags(flags)',
                    description: 'Sets the bitflags of a tile.'
                },
                // Item
                {
                    section: 'item',
                    signature: 'item:getName()',
                    description: 'Returns the item\'s name.'
                }, {
                    section: 'item',
                    signature: 'item:getRarity()',
                    description: 'Returns the item\'s rarity.'
                }, {
                    section: 'item',
                    signature: 'item:getActionType()',
                    description: 'Returns the item\'s action type (e.g., clothing, seed).'
                }, {
                    section: 'item',
                    signature: 'item:getGrowTime()',
                    description: 'Returns the item\'s grow time in seconds.'
                }, {
                    section: 'item',
                    signature: 'item:setGrowTime(seconds)',
                    description: 'Sets the grow time for an item globally.'
                }, {
                    section: 'item',
                    signature: 'item:setActionType(type)',
                    description: 'Sets the action type for an item globally.'
                }, {
                    section: 'item',
                    signature: 'item:setDescription(text)',
                    description: 'Sets the description for an item globally.'
                }, {
                    section: 'item',
                    signature: 'item:getCategoryType()',
                    description: 'Returns the category type of an item (as a bitflag integer).'
                }, {
                    section: 'item',
                    signature: 'item:getEditableType()',
                    description: 'Returns the editable type of an item.'
                }, {
                    section: 'item',
                    signature: 'item:setCategoryType(value)',
                    description: 'Sets the category type for an item globally, using bit flags.'
                }, {
                    section: 'item',
                    signature: 'item:setEditableType(value)',
                    description: 'Sets the editable type for an item globally.'
                }, {
                    section: 'item',
                    signature: 'item:setPrice(price)',
                    description: 'Sets the price of the item.'
                }, {
                    section: 'item',
                    signature: 'item:isObtainable()',
                    description: 'Returns true if the item is obtainable.'
                }, {
                    section: 'item',
                    signature: 'item:getNetID()',
                    description: 'Returns the item\'s net ID (same as item ID).'
                }, {
                    section: 'item',
                    signature: 'item:getGems(world, player)',
                    description: 'Returns the number of gems an item would drop. Pass `world` and `player` arguments (optional) to include buffs.'
                }, {
                    section: 'item',
                    signature: 'item:getXP(world, player)',
                    description: 'Returns the amount of XP an item would give. Pass `world` and `player` arguments (optional) to include buffs.'
                }, {
                    section: 'item',
                    signature: 'item:getClothingType()',
                    description: 'Returns the clothing type of an item.'
                }, {
                    section: 'item',
                    signature: 'item:setClothingType(typeID)',
                    description: 'Sets the clothing type for an item globally.'
                }, {
                    section: 'item',
                    signature: 'item:getID()',
                    description: 'Returns the item\'s ID.'
                },
                // Inventory Item
                {
                    section: 'inventory_item',
                    signature: 'inventory_item:getItemID()',
                    description: 'From `player:getInventoryItems()`, returns the item ID.'
                }, {
                    section: 'inventory_item',
                    signature: 'inventory_item:getItemCount()',
                    description: 'From `player:getInventoryItems()`, returns the item count.'
                },
                // Drop
                {
                    section: 'drop',
                    signature: 'drop:getItemID()',
                    description: 'From `world:getDroppedItems()`, returns the dropped item ID.'
                }, {
                    section: 'drop',
                    signature: 'drop:getItemCount()',
                    description: 'From `world:getDroppedItems()`, returns the dropped item count.'
                }, {
                    section: 'drop',
                    signature: 'drop:getPosX()',
                    description: 'Returns the X pixel position of the dropped item.'
                }, {
                    section: 'drop',
                    signature: 'drop:getPosY()',
                    description: 'Returns the Y pixel position of the dropped item.'
                }, {
                    section: 'drop',
                    signature: 'drop:getUID()',
                    description: 'Returns the unique ID of the dropped item.'
                }, {
                    section: 'drop',
                    signature: 'drop:getFlags()',
                    description: 'Returns the flags of the dropped item.'
                },
                // Server & Global
                {
                    section: 'server',
                    signature: 'getItem(itemID)',
                    description: 'Returns the global item data object for a given item ID.'
                }, {
                    section: 'server',
                    signature: 'getItemsCount()',
                    description: 'Returns the total number of items loaded in the server.'
                }, {
                    section: 'server',
                    signature: 'getPlayerByName(name)',
                    description: 'Returns the player object for a given name, if they are online.'
                }, {
                    section: 'server',
                    signature: 'getPlayer(userID)',
                    description: 'Returns the player object for a given user ID, if they are online.'
                }, {
                    section: 'server',
                    signature: 'getServerCurrentEvent()',
                    description: 'Returns the ID of the current server-wide event.'
                }, {
                    section: 'server',
                    signature: 'getEnumItem(enumName)',
                    description: 'Gets an item by its enum name (e.g., "ITEM_DIRT"). Returns an item object.'
                }, {
                    section: 'server',
                    signature: 'reloadScripts()',
                    description: 'Reloads all Lua scripts.'
                }, {
                    section: 'server',
                    signature: 'getServerName()',
                    description: 'Returns the server name.'
                }, {
                    section: 'server',
                    signature: 'addWorldMenuWorld(worldID, displayName, color, priority)',
                    description: 'Adds a world to the main menu world list. Priority 1 is before special worlds, 0 is after.'
                }, {
                    section: 'server',
                    signature: 'removeWorldMenuWorld(worldID)',
                    description: 'Removes a world from the main menu list.'
                }, {
                    section: 'server',
                    signature: 'hideWorldMenuDefaultSpecialWorlds(hide)',
                    description: 'Pass `1` to hide default worlds like LOCKE, `0` to show.'
                }, {
                    section: 'server',
                    signature: 'getServerPlayers()',
                    description: 'Returns a table of all online players on the server.'
                }, {
                    section: 'server',
                    signature: 'loadDataFromServer(key)',
                    description: 'Loads a previously saved Lua table from the server.'
                }, {
                    section: 'server',
                    signature: 'saveDataToServer(key, dataTable)',
                    description: 'Saves a Lua table to the server with a specific key.'
                }, {
                    section: 'server',
                    signature: 'loadStringFromServer(key)',
                    description: 'Loads a string value from the server.'
                }, {
                    section: 'server',
                    signature: 'saveStringToServer(key, value)',
                    description: 'Saves a string value to the server.'
                }, {
                    section: 'server',
                    signature: 'getAllPlayers()',
                    description: 'Returns a list of all players who have ever logged in.'
                }, {
                    section: 'server',
                    signature: 'getMaxLevel()',
                    description: 'Returns the maximum player level configured on the server.'
                }, {
                    section: 'server',
                    signature: 'registerLuaEvent(eventData)',
                    description: 'Registers a custom server-wide event.'
                }, {
                    section: 'server',
                    signature: 'addSidebarButton(buttonJson)',
                    description: 'Adds a button to the player\'s sidebar UI using a JSON string.'
                }, {
                    section: 'server',
                    signature: 'addSocialPortalButton(buttonDef, callback)',
                    description: 'Adds a button to the social portal.'
                }, {
                    section: 'server',
                    signature: 'getTopPlayerByBalance()',
                    description: 'Returns the top player by balance.'
                }, {
                    section: 'server',
                    signature: 'getTopWorldByVisitors()',
                    description: 'Returns the top world by visitors.'
                }, {
                    section: 'server',
                    signature: 'getActiveWorlds()',
                    description: 'Returns a table of all currently loaded (active) worlds.'
                }, {
                    section: 'server',
                    signature: 'parseText(text)',
                    description: 'Converts a pipe-delimited string (e.g., "key|value") into a table. Example: `local data = parseText("name|John"); print(data["name"])`.'
                }, {
                    section: 'server',
                    signature: 'setGemEvent(multiplier)',
                    description: 'Starts a server-wide gem event. A multiplier of 0 or 1 stops the event.'
                }, {
                    section: 'server',
                    signature: 'setXPEvent(multiplier)',
                    description: 'Starts a server-wide XP event. A multiplier of 0 or 1 stops the event.'
                }, {
                    section: 'server',
                    signature: 'getRequiredEvent()',
                    description: 'Returns the required event.'
                }, {
                    section: 'server',
                    signature: 'isVoucher()',
                    description: 'Returns if the item is a voucher.'
                }, {
                    section: 'server',
                    signature: 'getCurrentServerDailyEvent()',
                    description: 'Returns the current server\'s daily event.'
                }, {
                    section: 'server',
                    signature: 'getTitle()',
                    description: 'Returns the title.'
                }, {
                    section: 'server',
                    signature: 'getAmount()',
                    description: 'Returns the amount.'
                }, {
                    section: 'server',
                    signature: 'getIOTMItem()',
                    description: 'Returns the IOTM item.'
                }, {
                    section: 'server',
                    signature: 'getPrice()',
                    description: 'Returns the price of the item.'
                }, {
                    section: 'server',
                    signature: 'isGrowtoken()',
                    description: 'Returns if the item is a Growtoken.'
                }, {
                    section: 'server',
                    signature: 'addDailyOfferPurchased(userID, itemID)',
                    description: 'Adds a daily offer purchased.'
                }, {
                    section: 'server',
                    signature: 'getCategory()',
                    description: 'Returns the category of the item.'
                }, {
                    section: 'server',
                    signature: 'getRealGTItemsCount()',
                    description: 'Returns the real GT items count.'
                }, {
                    section: 'server',
                    signature: 'getTexture()',
                    description: 'Returns the texture.'
                }, {
                    section: 'server',
                    signature: 'getEventOffers()',
                    description: 'Returns the event offers.'
                }, {
                    section: 'server',
                    signature: 'getActiveDailyOffers()',
                    description: 'Returns the active daily offers.'
                }, {
                    section: 'server',
                    signature: 'onPurchaseItem(player, item, bool)',
                    description: 'Firing the purchase item event.'
                }, {
                    section: 'server',
                    signature: 'getDescription()',
                    description: 'Returns the description.'
                }, {
                    section: 'server',
                    signature: 'getItemsDescription()',
                    description: 'Returns the items description.'
                }, {
                    section: 'server',
                    signature: 'isRPC()',
                    description: 'Returns if the item is an RPC.'
                }, {
                    section: 'server',
                    signature: 'getTexturePosX()',
                    description: 'Returns the texture position X.'
                }, {
                    section: 'server',
                    signature: 'getTexturePosY()',
                    description: 'Returns the texture position Y.'
                }, {
                    section: 'server',
                    signature: 'onPurchaseItemReq(player, itemID)',
                    description: 'Firing the purchase item request event.'
                }, {
                    section: 'server',
                    signature: 'getStoreItems()',
                    description: 'Returns the store items.'
                }, {
                    section: 'server',
                    signature: 'registerLuaPlaymod(PLAYMODDATA)',
                    description: 'Registers the Lua playmod.'
                }, {
                    section: 'server',
                    signature: 'getExpireTime()',
                    description: 'Returns the Expire Time.'
                }, {
                    section: 'server',
                    signature: 'getNewsBanner()',
                    description: 'Returns the news banner.'
                }, {
                    section: 'server',
                    signature: 'getNewsBannerDimensions()',
                    description: 'Returns the news banner dimensions.'
                }, {
                    section: 'server',
                    signature: 'getTodaysDate()',
                    description: 'Returns the Date.'
                }, {
                    section: 'server',
                    signature: 'getTodaysEvents()',
                    description: 'Returns the Event of that day.'
                }, {
                    section: 'server',
                    signature: 'getCurrentEventDescription()',
                    description: 'Returns the current event\'s description.'
                }, {
                    section: 'server',
                    signature: 'getCurrentDailyEventDescription()',
                    description: 'Returns the current daily event\'s description.'
                }, {
                    section: 'server',
                    signature: 'getCurrentRoleDayDescription()',
                    description: 'Returns the current role day\'s description.'
                }, {
                    section: 'server',
                    signature: 'getServerID()',
                    description: 'Returns server ID.'
                }, {
                    section: 'server',
                    signature: 'worldExists(name)',
                    description: 'Checks if a world with the given name already exists on the server.'
                }, {
                    section: 'server',
                    signature: 'getBlessingName(blessing_id)',
                    description: 'Returns the name of a blessing by its ID.'
                }, {
                    section: 'server',
                    signature: 'getBlessingInfo(blessing_id)',
                    description: 'Returns the information/description of a blessing by its ID.'
                }, {
                    section: 'server',
                    signature: 'getBlessingRarity(blessing_id)',
                    description: 'Returns the rarity of a blessing by its ID.'
                }, {
                    section: 'server',
                    signature: 'setBroadcastWorld(worldName)',
                    description: 'Sets the global broadcast world for all players.'
                }, {
                    section: 'server',
                    signature: 'getRoles()',
                    description: 'Returns a table containing all server roles.'
                }, {
                    section: 'server',
                    signature: 'getHighestPriorityRole()',
                    description: 'Returns the role object with the highest priority.'
                }, {
                    section: 'server',
                    signature: 'getEcoQuantity(itemID)',
                    description: 'Returns the total count of an item in the economy (players + worlds).'
                }, {
                    section: 'server',
                    signature: 'getEcoQuantityPlayers(itemID)',
                    description: 'Returns the total count of an item held by players.'
                }, {
                    section: 'server',
                    signature: 'getEcoQuantityWorlds(itemID)',
                    description: 'Returns the total count of an item placed or stored in worlds.'
                }, {
                    section: 'server',
                    signature: 'createRedeemCode(redeemData)',
                    description: 'Creates a redeem code dynamically. Returns the code string or empty string on failure.'
                }, {
                    section: 'server',
                    signature: 'getJimDailyQuest()',
                    description: 'Returns the Jim Daily Quest object. Contains `jimDaily.firstItemID`, `jimDaily.firstItemCount`, etc.'
                }, {
                    section: 'server',
                    signature: 'deleteAccount(userID)',
                    description: 'Invalidates user data, effectively deleting the account. Owned worlds/items will show "ERROR" as owner.'
                }, {
                    section: 'server',
                    signature: 'deleteWorld(worldID)',
                    description: 'Invalidates world data, effectively deleting the world.'
                }, {
                    section: 'server',
                    signature: 'getServerDefaultPort()',
                    description: 'Returns the default port the server is running on.'
                },
                // OS Library
                {
                    section: 'os',
                    signature: 'os.execute(command)',
                    description: 'Executes a system command. Use with extreme caution.'
                }, {
                    section: 'os',
                    signature: 'os.time()',
                    description: 'Returns the current time as a Unix timestamp.'
                }, {
                    section: 'os',
                    signature: 'os.clock()',
                    description: 'Returns the CPU time used by the program in seconds.'
                }, {
                    section: 'os',
                    signature: 'os.date()',
                    description: 'Formats a date and time.'
                }, {
                    section: 'os',
                    signature: 'os.getenv(varname)',
                    description: 'Gets an environment variable.'
                }, {
                    section: 'os',
                    signature: 'os.remove(filename)',
                    description: 'Deletes a file.'
                }, {
                    section: 'os',
                    signature: 'os.rename(oldname, newname)',
                    description: 'Renames a file.'
                }, {
                    section: 'os',
                    signature: 'os.setlocale(locale, category)',
                    description: 'Sets the program locale.'
                }, {
                    section: 'os',
                    signature: 'os.exit(code)',
                    description: 'Exits the script immediately.'
                },
                // Libraries
                {
                    section: 'libraries',
                    signature: 'http.get(url, headers)',
                    description: 'Performs an HTTP GET request. Must be wrapped in a coroutine.'
                }, {
                    section: 'libraries',
                    signature: 'http.post(url, headers, postData)',
                    description: 'Performs an HTTP POST request. Must be wrapped in a coroutine.'
                }, {
                    section: 'libraries',
                    signature: 'json.encode(dataTable)',
                    description: 'Encodes a Lua table into a JSON string.'
                }, {
                    section: 'libraries',
                    signature: 'json.decode(jsonString)',
                    description: 'Decodes a JSON string into a Lua table.'
                }, {
                    section: 'libraries',
                    signature: 'bit.band(x, y)',
                    description: 'Performs a bitwise AND operation. Used for checking flags.'
                }, {
                    section: 'libraries',
                    signature: 'bit.lshift(x, n)',
                    description: 'Performs a left bitwise shift. Used for creating bit flags.'
                }, {
                    section: 'libraries',
                    signature: 'timer.setTimeout(delay_seconds, function, ...args)',
                    description: 'Executes a function once after a specified delay. Additional arguments are passed to the function.'
                }, {
                    section: 'libraries',
                    signature: 'timer.setInterval(interval_seconds, function)',
                    description: 'Executes a function repeatedly at a specified interval. Returns an ID to be used with `timer.clear`.'
                }, {
                    section: 'libraries',
                    signature: 'timer.clear(id)',
                    description: 'Stops a timer that was created with `setInterval`.'
                }, {
                    section: 'libraries',
                    signature: 'file.read(path)',
                    description: 'Reads the content of a file.'
                }, {
                    section: 'libraries',
                    signature: 'file.write(path, content)',
                    description: 'Writes content to a file.'
                }, {
                    section: 'libraries',
                    signature: 'file.exists(path)',
                    description: 'Checks if a file exists.'
                }, {
                    section: 'libraries',
                    signature: 'file.delete(path)',
                    description: 'Deletes a file.'
                }, {
                    section: 'libraries',
                    signature: 'dir.create(path)',
                    description: 'Creates a directory.'
                }, {
                    section: 'libraries',
                    signature: 'dir.exists(path)',
                    description: 'Checks if a directory exists.'
                }, {
                    section: 'libraries',
                    signature: 'dir.delete(path)',
                    description: 'Deletes a directory.'
                }, {
                    section: 'libraries',
                    signature: 'sqlite.open(path)',
                    description: 'Opens a SQLite database connection. Returns a db object.'
                }, {
                    section: 'libraries',
                    signature: 'db:query(sql)',
                    description: 'Executes a SQL query on the database object.'
                }, {
                    section: 'libraries',
                    signature: 'db:close()',
                    description: 'Closes the SQLite database connection.'
                }, {
                    section: 'libraries',
                    signature: 'require(moduleName)',
                    description: 'Loads a Lua module.'
                },
                // Misc
                {
                    section: 'misc',
                    signature: 'data["dialog_name"]',
                    description: 'The name of the dialog, returned in the `data` table from `onPlayerDialogCallback`.'
                }, {
                    section: 'misc',
                    signature: 'data["buttonClicked"]',
                    description: 'The name of the button the player clicked, returned in the `data` table.'
                }, {
                    section: 'misc',
                    signature: 'data["selection"]',
                    description: 'The item selected by the player in an item picker, returned in the `data` table.'
                }, {
                    section: 'misc',
                    signature: 'data["item"]',
                    description: 'The item associated with a specific dialog action.'
                }, {
                    section: 'misc',
                    signature: 'TileDataProperties',
                    description: 'A table of constants for tile data properties (e.g., `TILE_DATA_TYPE_SEED_FRUITS_COUNT`, `TILE_DATA_TYPE_MAGPLANT_ITEM_COUNT`).'
                }, {
                    section: 'misc',
                    signature: 'PlayerClothes',
                    description: 'A table of constants for clothing slots (e.g., `PlayerClothes.HAND`, `PlayerClothes.FEET`).'
                }, {
                    section: 'misc',
                    signature: 'PlayerRoleQuestTypes',
                    description: 'A table of constants for role quest types (e.g., `PlayerRoleQuestTypes.Farmer`, `PlayerRoleQuestTypes.Builder`).'
                }, {
                    section: 'misc',
                    signature: 'ITEM_CATEGORY_FLAGS',
                    description: 'A table of bit flags for item categories (e.g., `ITEM_CATEGORY_FLAGS.UNTRADABLE`, `ITEM_CATEGORY_FLAGS.BETA`).'
                }, {
                    section: 'misc',
                    signature: 'Roles',
                    description: 'A table of constants for player roles (e.g., `Roles.ROLE_NONE`, `Roles.ROLE_ADMIN`, `Roles.ROLE_DEVELOPER`).'
                }, {
                    section: 'misc',
                    signature: 'RoleFlags',
                    description: 'A table of bit flags for roles (e.g., `RoleFlags.ACCESS_ALL_WORLDS`, `RoleFlags.BYPASS_ANTICHEAT`).'
                }, {
                    section: 'misc',
                    signature: 'event:reply(message, components)',
                    description: 'Discord Event: Replies to the interaction.'
                }, {
                    section: 'misc',
                    signature: 'event:dialog(modalTable)',
                    description: 'Discord Event: Opens a modal dialog.'
                }, {
                    section: 'misc',
                    signature: 'event:getCustomID()',
                    description: 'Discord Event: Gets the custom ID of the interaction.'
                }, {
                    section: 'misc',
                    signature: 'event:getChannelID()',
                    description: 'Discord Event: Gets the channel ID.'
                }, {
                    section: 'misc',
                    signature: 'event:getValue(inputID)',
                    description: 'Discord Event: Gets the value of a form input.'
                }, {
                    section: 'misc',
                    signature: 'event:isBot()',
                    description: 'Discord Event: Checks if the author is a bot.'
                }, {
                    section: 'misc',
                    signature: 'event:getContent()',
                    description: 'Discord Event: Gets the message content.'
                }, {
                    section: 'misc',
                    signature: 'event:getPlayer()',
                    description: 'Discord Event: Gets the player object linked to the Discord user.'
                }, {
                    section: 'misc',
                    signature: 'req.method',
                    description: 'HTTP Request: The HTTP method (get, post, etc.).'
                }, {
                    section: 'misc',
                    signature: 'req.path',
                    description: 'HTTP Request: The request path.'
                }, {
                    section: 'misc',
                    signature: 'req.body',
                    description: 'HTTP Request: The request body.'
                }, {
                    section: 'misc',
                    signature: 'req.headers',
                    description: 'HTTP Request: The request headers.'
                }, {
                    section: 'misc',
                    signature: 'TILE_FLAGS',
                    description: 'Constants for tile flags (e.g. `TILE_FLAG_PAINTED_RED`, `TILE_FLAG_IS_OPEN_TO_PUBLIC`).'
                }, ];

                const sections = {};
                document.querySelectorAll('.doc-section').forEach(el => {
                    sections[el.id] = el;
                }
                );

                documentationData.forEach(buildFunctionEntry);

                function buildFunctionEntry(data) {
                    const {section, signature, description} = data;

                    const container = document.createElement('div');
                    const fullName = signature.split('(')[0].trim().split('|')[0];
                    container.className = 'function-entry';
                    container.id = `func-${fullName.replace(/[:"\[\]\(\).|]/g, '')}`;
                    container.dataset.name = fullName.toLowerCase();

                    let target, name, params;
                    const paramMatch = signature.match(/\((.*)\)/);
                    params = paramMatch ? paramMatch[1] : '';

                    if (signature.includes(':')) {
                        [target,name] = fullName.split(':');
                    } else if (signature.includes('.')) {
                        [target,name] = fullName.split('.');
                    } else if (signature.includes('[')) {
                        const parts = fullName.split(/[\["\]]/).filter(Boolean);
                        target = parts[0];
                        name = `["${parts[1]}"]`;
                    } else {
                        name = fullName;
                    }

                    let signatureHTML = '';
                    if (target) {
                        const separator = signature.includes('.') ? '.' : ':';
                        signatureHTML += `<span class="type-name">${target}</span><span class="text-c-text-secondary">${separator}</span>`;
                    }
                    if (name && name.startsWith('[')) {
                        signatureHTML += `<span class="text-c-text-secondary">[</span><span class="function-name">${name.replace(/[\["\]]/g, '')}</span><span class="text-c-text-secondary">]</span>`;
                    } else if (section === 'dialogs') {
                        const parts = signature.split('|');
                        signatureHTML = `<span class="function-name">${parts[0]}</span>` + parts.slice(1).map(p => `<span class="text-c-text-secondary">|</span><span class="param-name">${p}</span>`).join('');
                    } else {
                        signatureHTML += `<span class="function-name">${name}</span>`;
                    }

                    if (paramMatch) {
                        const paramsHTML = params.split(',').map(p => p.trim() ? `<span class="param-name">${p.trim()}</span>` : '').join('<span class="text-c-text-secondary">, </span>');
                        signatureHTML += `<span class="text-c-text-secondary">(</span>${paramsHTML}<span class="text-c-text-secondary">)</span>`;
                    }

                    container.innerHTML = `
                    <div class="function-header">
                        <div class="function-signature font-code">
                            <button class="copy-btn" title="Copy signature">
                                <i data-lucide="copy" class="w-4 h-4"></i>
                            </button>
                            <code>${signatureHTML}</code>
                        </div>
                    </div>
                    <div class="function-body">
                        <p class="text-c-text-secondary">${description || 'No description available.'}</p>
                    </div>
                `;

                    if (sections[section]) {
                        sections[section].appendChild(container);
                    }
                }

                function setupInteractivity() {
                    const mainContent = document.querySelector('.doc-content');
                    const onThisPageNav = document.getElementById('on-this-page-nav');
                    const observerOptions = {
                        rootMargin: "-80px 0px -60% 0px"
                    };

                    const sectionObserver = new IntersectionObserver(entries => {
                        entries.forEach(entry => {
                            if (entry.isIntersecting) {
                                onThisPageNav.innerHTML = '';
                                const sectionId = entry.target.id;

                                // Specific handling for tools
                                if (sectionId === 'xml-encoder') {
                                    const li = document.createElement('li');
                                    li.innerHTML = `<span class="text-xs p-1 block text-c-accent font-semibold cursor-pointer" onclick="document.getElementById('xml-encoder').scrollIntoView({behavior: 'smooth'})">XML Encoder Tool</span>`;
                                    onThisPageNav.appendChild(li);
                                    return;
                                }
                                if (sectionId === 'ai-helper') {
                                    const li = document.createElement('li');
                                    li.innerHTML = `<span class="text-xs p-1 block text-c-accent font-semibold cursor-pointer" onclick="document.getElementById('ai-helper').scrollIntoView({behavior: 'smooth'})">AI Code Helper</span>`;
                                    onThisPageNav.appendChild(li);
                                    return;
                                }
                                if (sectionId === 'bgra-picker') {
                                    const li = document.createElement('li');
                                    li.innerHTML = `<span class="text-xs p-1 block text-c-accent font-semibold cursor-pointer" onclick="document.getElementById('bgra-picker').scrollIntoView({behavior: 'smooth'})">BGRA Color Picker</span>`;
                                    onThisPageNav.appendChild(li);
                                    return;
                                }

                                document.querySelectorAll(`#${sectionId} .function-entry`).forEach(func => {
                                    const funcName = func.dataset.name;
                                    const li = document.createElement('li');
                                    li.innerHTML = `<a href="#${func.id}" class="sidebar-link on-page-link text-xs p-1 rounded-md block text-c-text-secondary">${funcName}</a>`;
                                    onThisPageNav.appendChild(li);
                                }
                                );
                            }
                        }
                        );
                    }
                    ,observerOptions);

                    document.querySelectorAll('.doc-section').forEach(s => sectionObserver.observe(s));

                    // Copy buttons logic
                    document.querySelectorAll('.copy-btn, #copy-xml-btn, #copy-ai-btn, .copy-btn-tool').forEach(button => {
                        button.addEventListener('click', (e) => {
                            e.stopPropagation();
                            // For XML Tool/AI/Color, copy from input/textarea. For entries, copy from code block.
                            let code = "";
                            if (button.id === 'copy-xml-btn') {
                                code = document.getElementById('xml-output').value;
                            } else if (button.id === 'copy-ai-btn') {
                                code = document.getElementById('ai-output').value;
                            } else if (button.classList.contains('copy-btn-tool')) {
                                const targetId = button.dataset.target;
                                code = document.getElementById(targetId).value;
                            } else {
                                code = button.nextElementSibling.innerText;
                            }

                            const textArea = document.createElement('textarea');
                            textArea.value = code;
                            textArea.style.position = 'fixed';
                            textArea.style.top = '0';
                            textArea.style.left = '0';
                            textArea.style.opacity = '0';
                            document.body.appendChild(textArea);
                            textArea.focus();
                            textArea.select();

                            let successful = false;
                            try {
                                successful = document.execCommand('copy');
                            } catch (err) {
                                console.error('Fallback: Oops, unable to copy', err);
                            }

                            document.body.removeChild(textArea);

                            if (successful) {
                                const icon = button.querySelector('i');
                                icon.setAttribute('data-lucide', 'check');
                                lucide.createIcons();
                                setTimeout( () => {
                                    icon.setAttribute('data-lucide', 'copy');
                                    lucide.createIcons();
                                }
                                , 2000);
                            }
                        }
                        );
                    }
                    );

                    // ... (Existing navigation observer and search logic)
                    const mainNavObserver = new IntersectionObserver(entries => {
                        entries.forEach(entry => {
                            const id = entry.target.getAttribute('id');
                            const navLink = document.querySelector(`#doc-nav a[href="#${id}"]`);
                            if (navLink && entry.isIntersecting) {
                                document.querySelectorAll('#doc-nav a').forEach(l => l.classList.remove('active'));
                                navLink.classList.add('active');
                            }
                        }
                        );
                    }
                    ,{
                        rootMargin: "-80px 0px -80% 0px"
                    });
                    document.querySelectorAll('.doc-section').forEach(s => mainNavObserver.observe(s));

                    const searchInput = document.getElementById('doc-search');
                    // ... (Search logic remains)
                    searchInput.addEventListener('input', (e) => {
                        const query = e.target.value.trim();
                        const regex = new RegExp(query.replace(/[-\/\\^$*+?.()|[\]{}]/g, '\\$&'),'gi');

                        document.querySelectorAll('.function-entry').forEach(entry => {
                            const nameEl = entry.querySelector('.function-signature code');
                            const descEl = entry.querySelector('.function-body > p');
                            if (nameEl)
                                entry.dataset.originalName = entry.dataset.originalName || nameEl.innerHTML;
                            if (descEl)
                                entry.dataset.originalDesc = entry.dataset.originalDesc || descEl.innerHTML;

                            const originalNameHTML = entry.dataset.originalName || '';
                            const originalNameText = entry.dataset.name || '';
                            const originalDesc = entry.dataset.originalDesc || '';

                            const nameMatch = originalNameText.toLowerCase().includes(query.toLowerCase());
                            const descMatch = originalDesc.toLowerCase().includes(query.toLowerCase());

                            if (query && (nameMatch || descMatch)) {
                                entry.style.display = '';
                                if (nameEl) {
                                    nameEl.innerHTML = originalNameHTML.replace(/>([^<]+)</g, (match, content) => {
                                        return `>${content.replace(regex, `<span class="highlight">$&</span>`)}<`;
                                    }
                                    );
                                }
                                if (descEl) {
                                    descEl.innerHTML = originalDesc.replace(regex, `<span class="highlight">$&</span>`);
                                }
                            } else if (!query) {
                                entry.style.display = '';
                                if (nameEl)
                                    nameEl.innerHTML = originalNameHTML;
                                if (descEl)
                                    descEl.innerHTML = originalDesc;
                            } else {
                                entry.style.display = 'none';
                            }
                        }
                        );
                    }
                    );
                }

                // XML Encoder Logic
                function setupXmlEncoder() {
                    const encodeBtn = document.getElementById('encode-btn');
                    const xmlInput = document.getElementById('xml-input');
                    const xmlOutput = document.getElementById('xml-output');
                    const serverNameInput = document.getElementById('xml-server-name');
                    const ownerNameInput = document.getElementById('xml-owner-name');

                    if (!encodeBtn || !xmlInput || !xmlOutput)
                        return;

                    const encodeString = (text) => {
                        if (!text)
                            return "";
                        return text.split('').map(char => {
                            return `&#x${char.charCodeAt(0).toString(16)};`;
                        }
                        ).join('');
                    }
                    ;

                    encodeBtn.addEventListener('click', () => {
                        const inputContent = xmlInput.value;
                        const serverName = serverNameInput.value || "GLOOMYGOTHS";
                        // UPDATED: Kept as fallback if empty, but input is now empty by default
                        const ownerName = ownerNameInput.value || "GLOOMYGOTHS";

                        if (!inputContent.trim()) {
                            xmlOutput.value = "Please enter some XML to encode.";
                            return;
                        }

                        try {
                            const xmlDeclaration = `<?xml version="${encodeString("1.0")}" encoding="${encodeString("utf-8")}"?>`;
                            const date = new Date();
                            const options = {
                                year: 'numeric',
                                month: 'long',
                                day: 'numeric'
                            };
                            const creationDate = date.toLocaleDateString('en-US', options);

                            const licenseBlock = `<LICENSE>
Ownership Declaration of XML File

Created by: ${ownerName}

Creation Date: ${creationDate}
Made on ESPERIA.LIVE/DEV

This XML file is the exclusive property of ${serverName}.
Unauthorized use, reproduction, or distribution of this file is strictly prohibited.

This file is licensed for use only on servers owned or operated by ${serverName}.
Any servers found to steal, emulate, or use these XML files without authorization will be reported and are subject to removal.
</LICENSE>`;

                            let mainContent = inputContent;
                            mainContent = mainContent.replace(/<\?xml[^>]*\?>/i, '').trim();
                            mainContent = mainContent.replace(/<ItemRenderer\s+item="[^"]*">/g, '<ItemRenderer>');
                            mainContent = mainContent.replace(/[\n\r\t]/g, '');
                            mainContent = mainContent.replace(/>\s+</g, '><').trim();
                            mainContent = mainContent.replace(/="([^"]*)"/g, (match, p1) => {
                                return `="${encodeString(p1)}"`;
                            }
                            );
                            mainContent = mainContent.replace(/>([^<]+)</g, (match, p1) => {
                                return `>${encodeString(p1)}<`;
                            }
                            );

                            const finalOutput = `${xmlDeclaration}\n${licenseBlock}${mainContent}`;
                            xmlOutput.value = finalOutput;

                        } catch (err) {
                            xmlOutput.value = `Error processing XML: ${err.message}`;
                            console.error(err);
                        }
                    }
                    );
                }

                // AI Code Helper Logic
                function setupAiHelper(docs) {
                    const generateBtn = document.getElementById('ai-generate-btn');
                    const promptInput = document.getElementById('ai-prompt');
                    const outputArea = document.getElementById('ai-output');
                    const apiKeyInput = document.getElementById('ai-api-key');
                    const statusLabel = document.getElementById('ai-status');
                    const toggleKeyBtn = document.getElementById('toggle-key-visibility');

                    if (!generateBtn || !promptInput)
                        return;

                    toggleKeyBtn.addEventListener('click', () => {
                        if (apiKeyInput.type === 'password') {
                            apiKeyInput.type = 'text';
                            toggleKeyBtn.innerHTML = '<i data-lucide="eye-off" class="w-4 h-4"></i>';
                        } else {
                            apiKeyInput.type = 'password';
                            toggleKeyBtn.innerHTML = '<i data-lucide="eye" class="w-4 h-4"></i>';
                        }
                        lucide.createIcons();
                    }
                    );

                    // Prepare documentation context string
                    const docContext = docs.map(d => `${d.signature} - ${d.description}`).join('\n');

                    generateBtn.addEventListener('click', async () => {
                        const prompt = promptInput.value.trim();
                        const apiKey = apiKeyInput.value.trim();

                        if (!prompt) {
                            statusLabel.textContent = "Please enter a prompt.";
                            statusLabel.className = "text-sm text-red-400 italic";
                            return;
                        }
                        if (!apiKey) {
                            statusLabel.textContent = "Please provide an API Key.";
                            statusLabel.className = "text-sm text-red-400 italic";
                            return;
                        }

                        statusLabel.textContent = "Generating...";
                        statusLabel.className = "text-sm text-c-accent italic";
                        generateBtn.disabled = true;
                        generateBtn.classList.add('opacity-50');

                        const systemInstruction = `You are an expert Lua scripter for the ESPERIA Growtopia Private Server. 
                    Your goal is to write functional Lua code based on the user's request.
                    
                    Here is the available API documentation you MUST use:
                    ${docContext}
                    
                    Rules:
                    1. Only output valid Lua code. Do not wrap it in markdown code blocks like \`\`\`lua.
                    2. Use the exact function signatures provided in the documentation.
                    3. If you need to use a hook/callback, structure it correctly (e.g., onPlayerCommandCallback(function(world, player, cmd) ... end)).
                    4. Add comments explaining what the code does.
                    5. Do not hallucinate functions that are not in the documentation provided above.
                    `;

                        try {
                            const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`, {
                                method: 'POST',
                                headers: {
                                    'Content-Type': 'application/json'
                                },
                                body: JSON.stringify({
                                    contents: [{
                                        parts: [{
                                            text: prompt
                                        }]
                                    }],
                                    systemInstruction: {
                                        parts: [{
                                            text: systemInstruction
                                        }]
                                    }
                                })
                            });

                            const data = await response.json();

                            if (data.error) {
                                throw new Error(data.error.message);
                            }

                            const generatedText = data.candidates?.[0]?.content?.parts?.[0]?.text;

                            if (generatedText) {
                                // Clean up if the model still adds markdown blocks despite instructions
                                const cleanText = generatedText.replace(/^```lua\s*/, '').replace(/^```\s*/, '').replace(/```$/, '');
                                outputArea.value = cleanText.trim();
                                statusLabel.textContent = "Done!";
                                statusLabel.className = "text-sm text-green-400 italic";
                            } else {
                                statusLabel.textContent = "No code generated.";
                                statusLabel.className = "text-sm text-yellow-400 italic";
                            }

                        } catch (error) {
                            console.error(error);
                            statusLabel.textContent = "Error: " + error.message;
                            statusLabel.className = "text-sm text-red-400 italic";
                        } finally {
                            generateBtn.disabled = false;
                            generateBtn.classList.remove('opacity-50');
                        }
                    }
                    );
                }

                // NEW: BGRA Color Picker Logic
                function setupColorPicker() {
                    const inputs = ['r', 'g', 'b', 'a'];

                    function updateColor() {
                        let r = parseInt(document.getElementById('val-r').value) || 0;
                        let g = parseInt(document.getElementById('val-g').value) || 0;
                        let b = parseInt(document.getElementById('val-b').value) || 0;
                        let a = parseInt(document.getElementById('val-a').value) || 0;

                        // Clamp values 0-255
                        [r, g, b, a].forEach( (val, i) => {
                            const id = inputs[i];
                            if (val > 255)
                                val = 255;
                            if (val < 0)
                                val = 0;
                            document.getElementById(`val-${id}`).value = val;
                            document.getElementById(`range-${id}`).value = val;
                        }
                        );

                        // Update Preview
                        const previewBox = document.getElementById('color-preview-box');
                        const previewText = document.getElementById('preview-text');
                        previewBox.style.backgroundColor = `rgba(${r}, ${g}, ${b}, ${a / 255})`;
                        previewText.textContent = `rgba(${r}, ${g}, ${b}, ${(a / 255).toFixed(2)})`;

                        // Calculate Growtopia Integer (ARGB Signed 32-bit)
                        // Formula: (Alpha << 24) | (Red << 16) | (Green << 8) | Blue
                        const intVal = ((b & 0xFF) << 24) | ((g & 0xFF) << 16) | ((r & 0xFF) << 8) | (a & 0xFF);

                        document.getElementById('out-gt-int').value = intVal;

                        // Calculate Hex (ARGB)
                        // Need unsigned 32-bit integer for hex string
                        const unsignedInt = intVal >>> 0;
                        const hexVal = '0x' + unsignedInt.toString(16).toUpperCase().padStart(8, '0');

                        document.getElementById('out-hex').value = hexVal;
                    }

                    inputs.forEach(id => {
                        const range = document.getElementById(`range-${id}`);
                        const num = document.getElementById(`val-${id}`);

                        if (range && num) {
                            range.addEventListener('input', (e) => {
                                num.value = e.target.value;
                                updateColor();
                            }
                            );
                            num.addEventListener('input', (e) => {
                                range.value = e.target.value;
                                updateColor();
                            }
                            );
                        }
                    }
                    );

                    // Initial update
                    updateColor();
                }

                lucide.createIcons();
                setupInteractivity();
                setupXmlEncoder();
                setupAiHelper(documentationData);
                setupColorPicker();
            }
            );
        </script>
    </body>
</html>
